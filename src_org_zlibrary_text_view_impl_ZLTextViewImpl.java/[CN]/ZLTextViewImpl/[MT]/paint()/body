{
  ZLPaintContext context=getContext();
  int paragraphs=myModel.getParagraphsNumber();
  if (paragraphs > 0) {
    ZLTextParagraphCursor firstParagraph=ZLTextParagraphCursor.getCursor(myModel,0);
    ZLTextWordCursor start=new ZLTextWordCursor();
    start.setCursor(firstParagraph);
    buildInfos(start);
  }
  int h=0;
  for (  ZLTextLineInfo info : myLineInfos) {
    int w=0;
    int spaces=0;
    boolean wordOccurred=false;
    ZLTextWordCursor cursor;
    for (cursor=info.Start; !cursor.equalWordNumber(info.End) && !cursor.isEndOfParagraph(); cursor.nextWord()) {
      ZLTextElement element=cursor.getElement();
      if (element instanceof ZLTextWord) {
        wordOccurred=true;
        String text=((ZLTextWord)element).Data;
        int dw=context.getStringWidth(text);
        context.drawString(w,h + info.Height,text);
        w+=dw;
      }
 else       if (element instanceof ZLTextHSpaceElement) {
        if (wordOccurred) {
          w+=context.getSpaceWidth();
          spaces++;
          wordOccurred=false;
        }
      }
 else       if (element instanceof ZLTextControlElement) {
        myStyle.applyControl((ZLTextControlElement)element);
      }
    }
    if (cursor.isEndOfParagraph()) {
      myStyle.reset();
    }
    h+=info.Height + info.Descent;
  }
}
