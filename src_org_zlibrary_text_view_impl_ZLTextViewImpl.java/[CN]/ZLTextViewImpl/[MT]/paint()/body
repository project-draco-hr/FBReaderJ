{
  ZLPaintContext context=getContext();
  myTextElementMap.clear();
  int paragraphs=myModel.getParagraphsNumber();
  if (paragraphs > 0) {
    int pn=StartParagraphNumberOption.getValue();
    pn=Math.max(0,Math.min(pn,paragraphs - 2));
    StartParagraphNumberOption.setValue(pn);
    ZLTextParagraphCursor firstParagraph=ZLTextParagraphCursor.getCursor(myModel,pn);
    ZLTextWordCursor start=new ZLTextWordCursor();
    start.setCursor(firstParagraph);
    buildInfos(start);
  }
  List<Integer> labels=new ArrayList<Integer>(myLineInfos.size() + 1);
  labels.add(0);
  getContext().moveYTo(0);
  for (  ZLTextLineInfo info : myLineInfos) {
    prepareTextLine(info);
    labels.add(myTextElementMap.size());
  }
  getContext().moveYTo(0);
  int index=0;
  for (  ZLTextLineInfo info : myLineInfos) {
    drawTextLine(info,labels.get(index),labels.get(index + 1));
    index++;
  }
}
