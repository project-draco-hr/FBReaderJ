{
  final ZLPaintContext context=getContext();
  context.clear(ZLTextStyleCollection.getInstance().getBaseStyle().BackgroundColorOption.getValue());
  myTextElementMap.clear();
  myTreeNodeMap.clear();
  if ((myModel == null) || (myModel.getParagraphsNumber() == 0)) {
    return;
  }
  int paragraphs=myModel.getParagraphsNumber();
  if (paragraphs > 0) {
    int pn=myStartParagraphNumber;
    pn=Math.max(0,Math.min(pn,paragraphs - 2));
    myStartParagraphNumber=pn;
    ZLTextParagraphCursor firstParagraph=ZLTextParagraphCursor.cursor(myModel,pn);
    ZLTextWordCursor start=new ZLTextWordCursor();
    start.setCursor(firstParagraph);
    buildInfos(start);
  }
  ArrayList<Integer> labels=new ArrayList<Integer>(myLineInfos.size() + 1);
  labels.add(0);
  context.moveYTo(getTopMargin());
  for (  ZLTextLineInfo info : myLineInfos) {
    prepareTextLine(info);
    labels.add(myTextElementMap.size());
  }
  context.moveYTo(getTopMargin());
  int index=0;
  for (  ZLTextLineInfo info : myLineInfos) {
    drawTextLine(info,labels.get(index),labels.get(index + 1));
    index++;
  }
}
