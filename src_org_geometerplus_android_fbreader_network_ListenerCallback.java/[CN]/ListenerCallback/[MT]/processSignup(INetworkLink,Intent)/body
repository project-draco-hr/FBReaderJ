{
  try {
    final NetworkAuthenticationManager mgr=link.authenticationManager();
    if (mgr instanceof LitResAuthenticationManager) {
      ((LitResAuthenticationManager)mgr).initUser(data.getStringExtra(USER_REGISTRATION_USERNAME),data.getStringExtra(USER_REGISTRATION_LITRES_SID),"",false);
    }
    if (!mgr.isAuthorised(true)) {
      throw new ZLNetworkException(NetworkException.ERROR_AUTHENTICATION_FAILED);
    }
    try {
      mgr.initialize();
    }
 catch (    ZLNetworkException e) {
      mgr.logOut();
      throw e;
    }
  }
 catch (  ZLNetworkException e) {
  }
}
