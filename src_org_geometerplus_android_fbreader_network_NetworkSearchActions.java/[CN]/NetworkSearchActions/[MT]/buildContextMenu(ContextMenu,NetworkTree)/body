{
  final SearchResultTree searchTree=(SearchResultTree)tree;
  menu.setHeaderTitle(tree.getName());
  final boolean isOpened=tree.hasChildren() && NetworkLibraryActivity.Instance.getAdapter().isOpen(tree);
  final ItemsLoadingRunnable catalogRunnable=NetworkLibraryActivity.Instance.getItemsLoadingRunnable(NetworkSearchActivity.SEARCH_RUNNABLE_KEY);
  final boolean isLoading=catalogRunnable != null;
  if (isLoading) {
    if (catalogRunnable.InterruptFlag.get()) {
      addMenuItem(menu,TREE_NO_ACTION,"stoppingNetworkSearch");
    }
 else {
      addMenuItem(menu,STOP_LOADING_ITEM_ID,"stopSearching");
    }
  }
 else {
    final String expandOrCollapseTitle=isOpened ? "hideResults" : "showResults";
    addMenuItem(menu,EXPAND_OR_COLLAPSE_TREE_ITEM_ID,expandOrCollapseTitle);
  }
}
