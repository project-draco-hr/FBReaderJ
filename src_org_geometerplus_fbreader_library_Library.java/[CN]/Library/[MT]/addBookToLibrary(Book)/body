{
  if (myBooks.containsKey(book.File)) {
    return;
  }
  myBooks.put(book.File,book);
  final SeriesInfo seriesInfo=book.getSeriesInfo();
  if (seriesInfo != null) {
    FirstLevelTree seriesRoot=getFirstLevelTree(LibraryTree.ROOT_BY_SERIES);
    if (seriesRoot == null) {
      seriesRoot=new FirstLevelTree(myRootTree,myRootTree.indexOf(getFirstLevelTree(LibraryTree.ROOT_BY_TITLE)) + 1,LibraryTree.ROOT_BY_SERIES);
    }
    seriesRoot.getSeriesSubTree(seriesInfo.Title).createBookInSeriesSubTree(book);
  }
  if (myDoGroupTitlesByFirstLetter) {
    final String letter=TitleTree.firstTitleLetter(book);
    if (letter != null) {
      final TitleTree tree=getFirstLevelTree(LibraryTree.ROOT_BY_TITLE).getTitleSubTree(letter);
      tree.createBookWithAuthorsSubTree(book);
    }
  }
 else {
    getFirstLevelTree(LibraryTree.ROOT_BY_TITLE).createBookWithAuthorsSubTree(book);
  }
  final SearchResultsTree found=(SearchResultsTree)getFirstLevelTree(LibraryTree.ROOT_FOUND);
  if (found != null && book.matches(found.getPattern())) {
    found.createBookWithAuthorsSubTree(book);
  }
}
