{
  final List<ZLPhysicalFile> physicalFilesList=collectPhysicalFiles();
  FileInfoSet fileInfos=new FileInfoSet();
  final Map<Long,Book> savedBooks=BooksDatabase.Instance().listBooks(fileInfos);
  for (  ZLPhysicalFile file : physicalFilesList) {
    collectBooks(file,fileInfos,savedBooks,!fileInfos.check(file));
    file.setCached(false);
  }
  final Book helpBook=getBook(getHelpFile(),fileInfos,savedBooks,false);
  if (helpBook != null) {
    myBooks.add(helpBook);
  }
  collectExternalBooks(fileInfos,savedBooks);
  fileInfos.save();
}
