{
  final NetworkLibrary library=NetworkLibrary.Instance();
  try {
    library.storeLoader(getTree(),this);
    library.fireModelChangedEvent(NetworkLibrary.ChangeListener.Code.SomeCode);
    try {
      doBefore();
    }
 catch (    ZLNetworkException e) {
      finishOnUiThread(e.getMessage(),false);
      return;
    }
    String error=null;
    try {
      doLoading();
    }
 catch (    ZLNetworkException e) {
      error=e.getMessage();
    }
    finishOnUiThread(error,isLoadingInterrupted());
    ensureFinishProcessed();
  }
  finally {
    library.removeStoredLoader(getTree());
synchronized (myFinishedLock) {
      if (myPostRunnable != null) {
        myPostRunnable.run();
      }
      myFinished=true;
    }
    library.fireModelChangedEvent(NetworkLibrary.ChangeListener.Code.SomeCode);
  }
}
