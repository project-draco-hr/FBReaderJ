{
  NetworkBookTree bookTree=(NetworkBookTree)tree;
  NetworkBookItem book=bookTree.Book;
  int resolvedType=demo ? BookReference.Type.DOWNLOAD_DEMO : BookReference.Type.DOWNLOAD_FULL;
  BookReference ref=book.reference(resolvedType);
  if (ref != null) {
    NetworkLibraryActivity.Instance.startService(new Intent(Intent.ACTION_VIEW,Uri.parse(ref.URL),NetworkLibraryActivity.Instance,BookDownloaderService.class).putExtra(BookDownloaderService.BOOK_FORMAT_KEY,ref.BookFormat).putExtra(BookDownloaderService.REFERENCE_TYPE_KEY,resolvedType).putExtra(BookDownloaderService.CLEAN_URL_KEY,ref.cleanURL()).putExtra(BookDownloaderService.TITLE_KEY,book.Title));
  }
}
