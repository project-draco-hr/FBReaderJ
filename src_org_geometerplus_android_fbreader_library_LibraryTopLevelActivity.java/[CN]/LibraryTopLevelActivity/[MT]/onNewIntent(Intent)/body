{
  if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
    final String pattern=intent.getStringExtra(SearchManager.QUERY);
    BookSearchPatternOption.setValue(pattern);
    FBTree searchResultsItem=Library.searchBooks(pattern);
    if (searchResultsItem.hasChildren()) {
      if (myItems.get(0) == mySearchResultsItem) {
        myItems.remove(0);
      }
      mySearchResultsItem=new TopLevelTree(myResource.getResource("searchResults"),pattern,R.drawable.ic_list_library_books,new OpenTreeRunnable(LibraryTreeActivity.PATH_SEARCH_RESULTS,mySelectedBookPath));
      myItems.add(0,mySearchResultsItem);
      getListView().invalidateViews();
      mySearchResultsItem.run();
    }
 else {
      Toast.makeText(this,ZLResource.resource("errorMessage").getResource("bookNotFound").getValue(),Toast.LENGTH_SHORT).show();
    }
  }
}
