{
  super.onCreate(icicle);
  requestWindowFeature(Window.FEATURE_NO_TITLE);
  if (SQLiteBooksDatabase.Instance() == null) {
    new SQLiteBooksDatabase(this,"LIBRARY_NG");
  }
  if (LibraryInstance == null) {
    LibraryInstance=new Library();
    startService(new Intent(getApplicationContext(),InitializationService.class));
  }
  myItems=new LinkedList<FBTree>();
  myItems.add(new TopLevelTree(myResource.getResource(PATH_FAVORITES),R.drawable.ic_list_library_favorites,new OpenTreeRunnable(PATH_FAVORITES,mySelectedBookPath)));
  myItems.add(new TopLevelTree(myResource.getResource(PATH_RECENT),R.drawable.ic_list_library_recent,new OpenTreeRunnable(PATH_RECENT,mySelectedBookPath)));
  myItems.add(new TopLevelTree(myResource.getResource(PATH_BY_AUTHOR),R.drawable.ic_list_library_authors,new OpenTreeRunnable(PATH_BY_AUTHOR,mySelectedBookPath)));
  myItems.add(new TopLevelTree(myResource.getResource(PATH_BY_TAG),R.drawable.ic_list_library_tags,new OpenTreeRunnable(PATH_BY_TAG,mySelectedBookPath)));
  myItems.add(new TopLevelTree(myResource.getResource("fileTree"),R.drawable.ic_list_library_folder,new Runnable(){
    public void run(){
      runFileManager();
    }
  }
));
  setListAdapter(new LibraryAdapter(myItems));
  onNewIntent(getIntent());
}
