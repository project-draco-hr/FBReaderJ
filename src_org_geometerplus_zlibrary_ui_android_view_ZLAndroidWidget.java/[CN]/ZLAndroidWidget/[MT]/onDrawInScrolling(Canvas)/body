{
  final ZLView view=ZLApplication.Instance().getCurrentView();
  final int w=getWidth();
  final int h=getMainAreaHeight();
  final AnimationProvider animator=getAnimationProvider();
  final AnimationProvider.Mode oldMode=animator.getMode();
  animator.doStep();
  if (animator.inProgress()) {
    animator.draw(canvas,mySecondaryBitmap,myMainBitmap);
    if (animator.getMode().Auto) {
      postInvalidate();
    }
    drawFooter(canvas);
  }
 else {
switch (oldMode) {
case AutoScrollingForward:
{
        final Bitmap swap=myMainBitmap;
        myMainBitmap=mySecondaryBitmap;
        mySecondaryBitmap=swap;
        view.onScrollingFinished(myPageToScrollTo);
        ZLApplication.Instance().onRepaintFinished();
        break;
      }
case AutoScrollingBackward:
    view.onScrollingFinished(ZLView.PageIndex.current);
  break;
}
setPageToScrollTo(ZLView.PageIndex.current);
onDrawStatic(canvas);
}
}
