{
  final ZLView view=ZLApplication.Instance().getCurrentView();
  final int w=getWidth();
  final int h=getMainAreaHeight();
  final AnimationProvider animator=getAnimationProvider();
  final AnimationProvider.Mode oldMode=animator.getMode();
  animator.doStep();
  if (animator.inProgress()) {
    animator.draw(canvas);
    if (animator.getMode().Auto) {
      postInvalidate();
    }
    drawFooter(canvas);
  }
 else {
switch (oldMode) {
case AutoScrollingForward:
{
        myBitmapManager.shift(animator.getPageToScrollTo() == ZLView.PageIndex.next);
        view.onScrollingFinished(myPageToScrollTo);
        ZLApplication.Instance().onRepaintFinished();
        break;
      }
case AutoScrollingBackward:
    view.onScrollingFinished(ZLView.PageIndex.current);
  break;
}
setPageToScrollTo(ZLView.PageIndex.current);
onDrawStatic(canvas);
}
}
