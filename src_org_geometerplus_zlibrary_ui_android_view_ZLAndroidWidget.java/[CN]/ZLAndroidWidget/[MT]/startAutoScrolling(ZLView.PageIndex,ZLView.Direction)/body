{
  if (myMainBitmap == null) {
    return;
  }
  myScrollingDirection=direction;
  final AnimationProvider animator=getAnimationProvider();
  final boolean doSetup=!animator.inProgress();
switch (pageIndex) {
case current:
switch (myPageToScrollTo) {
case current:
      animator.terminate();
    myScrollingSpeed=0;
  break;
case previous:
animator.setScrollingMode(AnimationProvider.ScrollingMode.AutoScrollingBackward);
myScrollingSpeed=-3;
break;
case next:
animator.setScrollingMode(AnimationProvider.ScrollingMode.AutoScrollingBackward);
myScrollingSpeed=3;
break;
}
break;
case previous:
animator.setScrollingMode(AnimationProvider.ScrollingMode.AutoScrollingForward);
myScrollingSpeed=3;
setPageToScrollTo(pageIndex);
break;
case next:
animator.setScrollingMode(AnimationProvider.ScrollingMode.AutoScrollingForward);
myScrollingSpeed=-3;
setPageToScrollTo(pageIndex);
break;
}
if (doSetup && animator.inProgress()) {
if (myScrollingDirection.IsHorizontal) {
myStartX=myScrollingSpeed < 0 ? getWidth() : 0;
myStartY=0;
}
 else {
myStartX=0;
myStartY=myScrollingSpeed < 0 ? getMainAreaHeight() : 0;
}
myEndX=myStartX;
myEndY=myStartY;
getAnimationProvider().setup(myStartX,myStartY,myEndX,myEndY,myScrollingDirection,getWidth(),getMainAreaHeight());
}
drawOnBitmap(mySecondaryBitmap);
postInvalidate();
}
