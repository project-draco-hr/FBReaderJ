{
  super.onDraw(canvas);
  ensureChildrenSizes();
  final int w=getWidth();
  final int h=getTextViewHeight();
  if ((myMainBitmap != null) && ((myMainBitmap.getWidth() != w) || (myMainBitmap.getHeight() != h))) {
    myMainBitmap=null;
    mySecondaryBitmap=null;
    System.gc();
    System.gc();
    System.gc();
  }
  if (myMainBitmap == null) {
    myMainBitmap=Bitmap.createBitmap(w,h,Bitmap.Config.RGB_565);
    mySecondaryBitmap=Bitmap.createBitmap(w,h,Bitmap.Config.RGB_565);
    mySecondaryBitmapIsUpToDate=false;
    drawOnBitmap(myMainBitmap);
  }
  if (myScrollingInProgress || (myScrollingShift != 0)) {
    onDrawInScrolling(canvas);
  }
 else {
    onDrawStatic(canvas);
    ZLApplication.Instance().onRepaintFinished();
  }
}
