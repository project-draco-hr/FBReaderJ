{
  int x=(int)event.getX();
  int y=(int)event.getY();
  final ZLView view=ZLApplication.Instance().getCurrentView();
switch (event.getAction()) {
case MotionEvent.ACTION_UP:
    if (myLongClickPerformed) {
      view.onFingerReleaseAfterLongPress(x,y);
    }
 else {
      if (myPendingLongClickRunnable != null) {
        removeCallbacks(myPendingLongClickRunnable);
        myPendingLongClickRunnable=null;
      }
      if (myPendingPress) {
        if (view.isDoubleTapSupported()) {
          if (myPendingShortClickRunnable == null) {
            myPendingShortClickRunnable=new ShortClickRunnable();
          }
          postDelayed(myPendingShortClickRunnable,ViewConfiguration.getDoubleTapTimeout());
        }
 else {
          view.onFingerSingleTap(x,y);
        }
      }
 else {
        view.onFingerRelease(x,y);
      }
    }
  myPendingPress=false;
myScreenIsTouched=false;
break;
case MotionEvent.ACTION_DOWN:
if (myPendingShortClickRunnable != null) {
removeCallbacks(myPendingShortClickRunnable);
myPendingShortClickRunnable=null;
view.onFingerDoubleTap();
}
 else {
postLongClickRunnable();
}
myScreenIsTouched=true;
myPendingPress=true;
myPressedX=x;
myPressedY=y;
break;
case MotionEvent.ACTION_MOVE:
if (myLongClickPerformed) {
view.onFingerMoveAfterLongPress(x,y);
}
 else {
if (myPendingPress) {
if (myPendingShortClickRunnable != null) {
removeCallbacks(myPendingShortClickRunnable);
myPendingShortClickRunnable=null;
}
final int slop=ViewConfiguration.get(getContext()).getScaledTouchSlop();
if (Math.abs(myPressedX - x) > slop || Math.abs(myPressedY - y) > slop) {
if (myPendingLongClickRunnable != null) {
removeCallbacks(myPendingLongClickRunnable);
}
view.onFingerPress(myPressedX,myPressedY);
myPendingPress=false;
}
}
if (!myPendingPress) {
view.onFingerMove(x,y);
}
}
break;
}
return true;
}
