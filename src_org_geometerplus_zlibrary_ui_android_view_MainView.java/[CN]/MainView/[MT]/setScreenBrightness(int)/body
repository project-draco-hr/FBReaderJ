{
  if (percent < 1) {
    percent=1;
  }
 else   if (percent > 100) {
    percent=100;
  }
  final Context context=getContext();
  if (!(context instanceof FBReaderMainActivity)) {
    return;
  }
  final FBReaderMainActivity activity=(FBReaderMainActivity)context;
  activity.getZLibrary().ScreenBrightnessLevelOption.setValue(percent);
  if (percent >= 50) {
    myColorLevel=null;
  }
 else   if (percent >= 25) {
    myColorLevel=null;
    percent=Math.max(2 * percent - 50,1);
  }
 else {
    myColorLevel=0x60 + (0xFF - 0x60) * Math.max(percent,0) / 25;
    percent=1;
  }
  activity.setScreenBrightnessSystem(percent);
  updateColorLevel();
  postInvalidate();
}
