{
  final boolean browser=Util.isBrowserTopupSupported(activity,link);
  final boolean sms=Util.isTopupSupported(activity,link,Util.SMS_TOPUP_ACTION);
  final boolean creditCard=Util.isTopupSupported(activity,link,Util.CREDIT_CARD_TOPUP_ACTION);
  final boolean selfService=Util.isTopupSupported(activity,link,Util.SELF_SERVICE_KIOSK_TOPUP_ACTION);
  final int count=(sms ? 1 : 0) + (browser ? 1 : 0) + (creditCard ? 1 : 0)+ (selfService ? 1 : 0);
  if (count > 1) {
    return TREE_SHOW_CONTEXT_MENU;
  }
 else   if (sms) {
    return TOPUP_VIA_SMS_ITEM_ID;
  }
 else   if (creditCard) {
    return TOPUP_VIA_CREDIT_CARD_ITEM_ID;
  }
 else   if (selfService) {
    return TOPUP_VIA_SELF_SERVICE_ITEM_ID;
  }
 else {
    return TOPUP_VIA_BROWSER_ITEM_ID;
  }
}
