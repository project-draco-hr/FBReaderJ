{
  final boolean sms=Util.isSmsTopupSupported(activity,link);
  final boolean browser=Util.isBrowserTopupSupported(activity,link);
  final boolean creditCard=Util.isCreditCardTopupSupported(activity,link);
  final int count=(sms ? 1 : 0) + (browser ? 1 : 0) + (creditCard ? 1 : 0);
  if (count > 1) {
    return TREE_SHOW_CONTEXT_MENU;
  }
 else   if (sms) {
    return TOPUP_VIA_SMS_ITEM_ID;
  }
 else   if (creditCard) {
    return TOPUP_VIA_CREDIT_CARD_ITEM_ID;
  }
 else {
    return TOPUP_VIA_BROWSER_ITEM_ID;
  }
}
