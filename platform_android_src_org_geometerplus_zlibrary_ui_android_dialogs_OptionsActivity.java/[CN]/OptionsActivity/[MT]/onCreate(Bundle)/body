{
  super.onCreate(bundle);
  PreferenceScreen preferenceScreen=getPreferenceManager().createPreferenceScreen(this);
  final ZLAndroidApplication application=(ZLAndroidApplication)getApplication();
  ZLAndroidOptionsDialog dialog=(ZLAndroidOptionsDialog)application.getData(DIALOG_KEY);
  for (  Object tab : dialog.tabs()) {
    PreferenceCategory category=new PreferenceCategory(this);
    ZLAndroidOptionsTab optionsTab=(ZLAndroidOptionsTab)tab;
    category.setTitle(optionsTab.getDisplayName());
    preferenceScreen.addPreference(category);
    for (    ZLAndroidOptionsTab.OptionData data : optionsTab.myEntries) {
      Preference test;
      if (data.Entry instanceof ZLBooleanOptionEntry) {
        test=new CheckBoxPreference(this);
      }
 else       if (data.Entry instanceof ZLStringOptionEntry) {
        test=new EditTextPreference(this);
        ((EditTextPreference)test).setText("Hello, World!");
      }
 else {
        continue;
      }
      test.setTitle(data.Name);
      test.setSummary("Test summary");
      category.addPreference(test);
    }
  }
  setPreferenceScreen(preferenceScreen);
}
