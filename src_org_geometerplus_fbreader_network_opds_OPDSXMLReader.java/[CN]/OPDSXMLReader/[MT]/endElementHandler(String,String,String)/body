{
  boolean interruptReading=super.endElementHandler(tagPrefix,tag,bufferContent);
switch (myState) {
case FEL_PRICE:
    if (tagPrefix == myOpdsNamespaceId && tag == TAG_PRICE) {
      if (bufferContent != null && myPriceCurrency != null) {
        if (myLink instanceof OPDSLink) {
          ((OPDSLink)myLink).Prices.add(new OPDSPrice(bufferContent.intern(),myPriceCurrency));
          myPriceCurrency=null;
        }
 else {
          Log.v(OPDS_LOG,"! (myLink instanceof OPDSLink)");
        }
      }
      myState=FE_LINK;
    }
  break;
case FEL_FORMAT:
if (tagPrefix == myDublinCoreNamespaceId && tag == DC_TAG_FORMAT) {
  if (bufferContent != null) {
    if (myLink instanceof OPDSLink) {
      ((OPDSLink)myLink).Formats.add(bufferContent.intern());
    }
 else {
      Log.v(OPDS_LOG,"! (myLink instanceof OPDSLink)");
    }
  }
  myState=FE_LINK;
}
break;
case FEC_HACK_SPAN:
myHtmlToString.processTextContent(true,tag,null,bufferContent);
if (bufferContent != null) {
myEntry.addAttribute(KEY_PRICE,bufferContent.intern());
}
myState=FE_CONTENT;
break;
case FE_DC_LANGUAGE:
if (tagPrefix == myDublinCoreNamespaceId && tag == DC_TAG_LANGUAGE) {
if (myEntry instanceof OPDSEntry) {
((OPDSEntry)myEntry).DCLanguage=bufferContent;
myState=F_ENTRY;
}
 else {
Log.v(OPDS_LOG,"! (myEntry instanceof OPDSEntry)");
}
}
break;
case FE_DC_ISSUED:
if (tagPrefix == myDublinCoreNamespaceId && tag == DC_TAG_ISSUED) {
if (ATOMDateConstruct.parse(bufferContent,myDCIssued)) {
if (myEntry instanceof OPDSEntry) {
((OPDSEntry)myEntry).DCIssued=myDCIssued;
}
 else {
Log.v(OPDS_LOG,"! (myEntry instanceof OPDSEntry)");
}
}
myDCIssued=null;
myState=F_ENTRY;
}
break;
case FE_DC_PUBLISHER:
if (tagPrefix == myDublinCoreNamespaceId && tag == DC_TAG_PUBLISHER) {
if (myEntry instanceof OPDSEntry) {
((OPDSEntry)myEntry).DCPublisher=bufferContent;
myState=F_ENTRY;
}
 else {
Log.v(OPDS_LOG,"! (myEntry instanceof OPDSEntry)");
}
}
break;
case FE_CALIBRE_SERIES:
if (tagPrefix == myCalibreNamespaceId && tag == CALIBRE_TAG_SERIES) {
if (myEntry instanceof OPDSEntry) {
((OPDSEntry)myEntry).SeriesTitle=bufferContent;
myState=F_ENTRY;
}
 else {
Log.v(OPDS_LOG,"! (myEntry instanceof OPDSEntry)");
}
}
break;
case FE_CALIBRE_SERIES_INDEX:
if (tagPrefix == myCalibreNamespaceId && tag == CALIBRE_TAG_SERIES_INDEX) {
if (bufferContent != null) {
try {
if (myEntry instanceof OPDSEntry) {
((OPDSEntry)myEntry).SeriesIndex=Float.parseFloat(bufferContent);
}
 else {
Log.v(OPDS_LOG,"! (myEntry instanceof OPDSEntry)");
}
}
 catch (NumberFormatException ex) {
}
}
myState=F_ENTRY;
}
break;
case OPENSEARCH_TOTALRESULTS:
if (tagPrefix == myOpenSearchNamespaceId && tag == OPENSEARCH_TAG_TOTALRESULTS) {
if (myFeed != null && bufferContent != null) {
try {
if (myFeed instanceof OPDSFeedMetadata) {
((OPDSFeedMetadata)myFeed).OpensearchTotalResults=Integer.parseInt(bufferContent);
}
 else {
Log.v(OPDS_LOG,"! (myFeed instanceof OPDSFeedMetadata)");
}
}
 catch (NumberFormatException ex) {
}
}
myState=FEED;
}
break;
case OPENSEARCH_ITEMSPERPAGE:
if (tagPrefix == myOpenSearchNamespaceId && tag == OPENSEARCH_TAG_ITEMSPERPAGE) {
if (myFeed != null && bufferContent != null) {
try {
if (myFeed instanceof OPDSFeedMetadata) {
((OPDSFeedMetadata)myFeed).OpensearchItemsPerPage=Integer.parseInt(bufferContent);
}
 else {
Log.v(OPDS_LOG,"! (myFeed instanceof OPDSFeedMetadata)");
}
}
 catch (NumberFormatException ex) {
}
}
myState=FEED;
}
break;
case OPENSEARCH_STARTINDEX:
if (tagPrefix == myOpenSearchNamespaceId && tag == OPENSEARCH_TAG_STARTINDEX) {
if (myFeed != null && bufferContent != null) {
try {
if (myFeed instanceof OPDSFeedMetadata) {
((OPDSFeedMetadata)myFeed).OpensearchStartIndex=Integer.parseInt(bufferContent);
}
 else {
Log.v(OPDS_LOG,"! (myFeed instanceof OPDSFeedMetadata)");
}
}
 catch (NumberFormatException ex) {
}
}
myState=FEED;
}
break;
}
return interruptReading;
}
