{
  int state=myState;
  boolean interruptReading=super.startElementHandler(tagPrefix,tag,attributes,bufferContent);
switch (state) {
case START:
    if (tagPrefix == myAtomNamespaceId && tag == TAG_FEED) {
      myFeedReader.processFeedStart();
      myFeed=new OPDSFeedMetadata();
      myFeed.readAttributes(attributes);
      myState=FEED;
      myFeedMetadataProcessed=false;
    }
  break;
case FEED:
if (tagPrefix == myAtomNamespaceId) {
  if (tag == TAG_LINK) {
    myLink=new OPDSLink();
    myLink.readAttributes(attributes);
    myState=F_LINK;
  }
 else   if (tag == TAG_ENTRY) {
    myEntry=new OPDSEntry();
    myEntry.readAttributes(attributes);
    myState=F_ENTRY;
    if (myFeed != null && !myFeedMetadataProcessed) {
      interruptReading=myFeedReader.processFeedMetadata(myFeed,true);
      myFeedMetadataProcessed=true;
    }
  }
}
 else if (tagPrefix == myOpenSearchNamespaceId) {
  if (tag == OPENSEARCH_TAG_TOTALRESULTS) {
    myState=OPENSEARCH_TOTALRESULTS;
  }
 else   if (tag == OPENSEARCH_TAG_ITEMSPERPAGE) {
    myState=OPENSEARCH_ITEMSPERPAGE;
  }
 else   if (tag == OPENSEARCH_TAG_STARTINDEX) {
    myState=OPENSEARCH_STARTINDEX;
  }
}
break;
case F_ENTRY:
if (tagPrefix == myAtomNamespaceId) {
if (tag == TAG_LINK) {
myLink=new OPDSLink();
myLink.readAttributes(attributes);
myState=FE_LINK;
}
}
 else if (tagPrefix == myDublinCoreNamespaceId) {
if (tag == DC_TAG_LANGUAGE) {
myState=FE_DC_LANGUAGE;
}
 else if (tag == DC_TAG_ISSUED) {
myDCIssued=new DCDate();
myDCIssued.readAttributes(attributes);
myState=FE_DC_ISSUED;
}
 else if (tag == DC_TAG_PUBLISHER) {
myState=FE_DC_PUBLISHER;
}
}
 else if (tagPrefix == myCalibreNamespaceId) {
if (tag == CALIBRE_TAG_SERIES) {
myState=FE_CALIBRE_SERIES;
}
 else if (tag == CALIBRE_TAG_SERIES_INDEX) {
myState=FE_CALIBRE_SERIES_INDEX;
}
}
break;
case FE_LINK:
if (tagPrefix == myOpdsNamespaceId && tag == TAG_PRICE) {
myPriceCurrency=attributes.getValue("currencycode");
myState=FEL_PRICE;
}
if (tagPrefix == myDublinCoreNamespaceId && tag == DC_TAG_FORMAT) {
myState=FEL_FORMAT;
}
break;
case FE_CONTENT:
myHtmlToString.processTextContent(false,tag,attributes,bufferContent);
if (tag == TAG_HACK_SPAN || attributes.getValue("class") == "price") {
myState=FEC_HACK_SPAN;
}
break;
default :
break;
}
return interruptReading;
}
