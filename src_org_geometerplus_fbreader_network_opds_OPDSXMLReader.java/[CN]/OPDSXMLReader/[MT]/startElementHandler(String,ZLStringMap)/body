{
  String tagPrefix=null;
  final int index=tag.indexOf(':');
  if (index >= 0) {
    tagPrefix=tag.substring(0,index).intern();
    tag=tag.substring(index + 1).intern();
  }
 else {
    tag=tag.intern();
  }
switch (myState) {
case START:
    if (tagPrefix == myAtomNamespaceId && tag == TAG_FEED) {
      myFeedReader.processFeedStart();
      myFeed=new OPDSFeedMetadata();
      myFeed.readAttributes(attributes);
      myState=FEED;
    }
  break;
case FEED:
if (tagPrefix == myAtomNamespaceId) {
  if (tag == TAG_AUTHOR) {
    myAuthor=new ATOMAuthor();
    myAuthor.readAttributes(attributes);
    myState=F_AUTHOR;
  }
 else   if (tag == TAG_ID) {
    myId=new ATOMId();
    myId.readAttributes(attributes);
    myState=F_ID;
  }
 else   if (tag == TAG_LINK) {
    myLink=new ATOMLink();
    myLink.readAttributes(attributes);
    myState=F_LINK;
  }
 else   if (tag == TAG_CATEGORY) {
    myCategory=new ATOMCategory();
    myCategory.readAttributes(attributes);
    myState=F_CATEGORY;
  }
 else   if (tag == TAG_TITLE) {
    myState=F_TITLE;
  }
 else   if (tag == TAG_UPDATED) {
    myUpdated=new ATOMUpdated();
    myUpdated.readAttributes(attributes);
    myState=F_UPDATED;
  }
 else   if (tag == TAG_ENTRY) {
    myEntry=new OPDSEntry();
    myEntry.readAttributes(attributes);
    mySummaryTagFound=false;
    myState=F_ENTRY;
  }
}
 else if (tagPrefix == myOpenSearchNamespaceId) {
  if (tag == OPENSEARCH_TAG_TOTALRESULTS) {
    myState=OPENSEARCH_TOTALRESULTS;
  }
 else   if (tag == OPENSEARCH_TAG_ITEMSPERPAGE) {
    myState=OPENSEARCH_ITEMSPERPAGE;
  }
 else   if (tag == OPENSEARCH_TAG_STARTINDEX) {
    myState=OPENSEARCH_STARTINDEX;
  }
}
break;
case F_ENTRY:
if (tagPrefix == myAtomNamespaceId) {
if (tag == TAG_AUTHOR) {
myAuthor=new ATOMAuthor();
myAuthor.readAttributes(attributes);
myState=FE_AUTHOR;
}
 else if (tag == TAG_ID) {
myId=new ATOMId();
myId.readAttributes(attributes);
myState=FE_ID;
}
 else if (tag == TAG_CATEGORY) {
myCategory=new ATOMCategory();
myCategory.readAttributes(attributes);
myState=FE_CATEGORY;
}
 else if (tag == TAG_LINK) {
myLink=new ATOMLink();
myLink.readAttributes(attributes);
myState=FE_LINK;
}
 else if (tag == TAG_PUBLISHED) {
myPublished=new ATOMPublished();
myPublished.readAttributes(attributes);
myState=FE_PUBLISHED;
}
 else if (tag == TAG_SUMMARY) {
myState=FE_SUMMARY;
}
 else if (tag == TAG_CONTENT) {
myState=FE_CONTENT;
}
 else if (tag == TAG_SUBTITLE) {
myState=FE_SUBTITLE;
}
 else if (tag == TAG_TITLE) {
myState=FE_TITLE;
}
 else if (tag == TAG_UPDATED) {
myUpdated=new ATOMUpdated();
myUpdated.readAttributes(attributes);
myState=FE_UPDATED;
}
 else if (tag == TAG_META) {
String name=attributes.getValue("name");
String value=attributes.getValue("value");
if (name != null && value != null) {
  if (name.equals(myCalibreNamespaceId + ":series")) {
    myEntry.SeriesTitle=value;
  }
 else   if (name.equals(myCalibreNamespaceId + ":series_index")) {
    try {
      myEntry.SeriesIndex=Integer.parseInt(value);
    }
 catch (    NumberFormatException ex) {
    }
  }
}
}
}
 else if (tagPrefix == myDublinCoreNamespaceId) {
if (tag == DC_TAG_LANGUAGE) {
myState=FE_DC_LANGUAGE;
}
 else if (tag == DC_TAG_ISSUED) {
myDCIssued=new DCDate();
myDCIssued.readAttributes(attributes);
myState=FE_DC_ISSUED;
}
 else if (tag == DC_TAG_PUBLISHER) {
myState=FE_DC_PUBLISHER;
}
}
break;
case F_AUTHOR:
if (tagPrefix == myAtomNamespaceId) {
if (tag == TAG_NAME) {
myState=FA_NAME;
}
 else if (tag == TAG_URI) {
myState=FA_URI;
}
 else if (tag == TAG_EMAIL) {
myState=FA_EMAIL;
}
}
break;
case FE_AUTHOR:
if (tagPrefix == myAtomNamespaceId) {
if (tag == TAG_NAME) {
myState=FEA_NAME;
}
 else if (tag == TAG_URI) {
myState=FEA_URI;
}
 else if (tag == TAG_EMAIL) {
myState=FEA_EMAIL;
}
}
break;
default :
break;
}
myBuffer.delete(0,myBuffer.length());
return false;
}
