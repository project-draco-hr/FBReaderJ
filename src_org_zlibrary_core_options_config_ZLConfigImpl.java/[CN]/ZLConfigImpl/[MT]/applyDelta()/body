{
  Set<String> usedCategories=new HashSet<String>();
  for (  String deletedGroup : myDeltaConfig.getDeletedGroups()) {
    ZLGroup gr=myMainConfig.getGroup(deletedGroup);
    if (gr != null) {
      for (      ZLOptionInfo option : gr.getOptions()) {
        if (option.getCategory() != null) {
          usedCategories.add(option.getCategory());
        }
      }
      myMainConfig.removeGroup(deletedGroup);
    }
  }
  Set<String> deletedValues=myDeltaConfig.getDeletedValues().getGroups();
  for (  String group : deletedValues) {
    for (    String option : myDeltaConfig.getDeletedValues().getOptions(group)) {
      ZLGroup gr=myMainConfig.getGroup(group);
      if (gr != null) {
        if (gr.getOptions().contains(option)) {
          usedCategories.add(myMainConfig.getCategory(group,option));
          myMainConfig.unsetValue(group,option);
        }
      }
    }
  }
  ZLSimpleConfig setValues=myDeltaConfig.getSetValues();
  Set<ZLGroup> groups=setValues.getGroups();
  for (  ZLGroup group : groups) {
    for (    ZLOptionInfo value : group.getOptions()) {
      usedCategories.add(value.getCategory());
      myMainConfig.setValue(group.getName(),value.getName(),value.getValue(),value.getCategory());
    }
  }
  myDeltaConfig.clear();
  return usedCategories;
}
