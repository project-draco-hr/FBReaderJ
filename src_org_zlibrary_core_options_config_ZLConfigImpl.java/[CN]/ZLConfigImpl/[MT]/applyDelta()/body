{
  Set<String> usedCategories=new HashSet<String>();
  for (  String deletedGroup : myDeltaConfig.getDeletedGroups()) {
    if (myMainConfig.getGroups().keySet().contains(deletedGroup)) {
      for (      ZLOptionValue option : myMainConfig.getGroups().get(deletedGroup).getValues()) {
        if (option.getCategory() != null) {
          usedCategories.add(option.getCategory());
        }
      }
      myMainConfig.removeGroup(deletedGroup);
    }
  }
  Set<String> deletedValues=myDeltaConfig.getDeletedValues().getGroups();
  for (  String group : deletedValues) {
    for (    String option : myDeltaConfig.getDeletedValues().getOptions(group)) {
      ZLGroup zlgroup=myMainConfig.getGroups().get(group);
      if (zlgroup != null) {
        if (zlgroup.getValues().contains(option)) {
          usedCategories.add(myMainConfig.getCategory(group,option));
          myMainConfig.unsetValue(group,option);
        }
      }
    }
  }
  ZLSimpleConfig setValues=myDeltaConfig.getSetValues();
  Map<String,ZLGroup> groups=setValues.getGroups();
  for (  String group : groups.keySet()) {
    for (    ZLOptionValue value : groups.get(group).getValues()) {
      usedCategories.add(value.getCategory());
      myMainConfig.setValue(group,value.getName(),value.getValue(),value.getCategory());
    }
  }
  myDeltaConfig.clear();
  return usedCategories;
}
