{
  Set<String> usedCategories=new HashSet<String>();
  for (  String deletedGroup : myDeltaConfig.getDeletedGroups()) {
    ZLGroup gr=myMainConfig.getGroup(deletedGroup);
    if (gr != null) {
      for (      ZLOptionInfo option : gr.options()) {
        if (option.getCategory() != null) {
          usedCategories.add(option.getCategory());
        }
      }
      myMainConfig.removeGroup(deletedGroup);
    }
  }
  for (  ZLOptionID option : myDeltaConfig.getDeletedValues().getAll()) {
    ZLGroup gr=myMainConfig.getGroup(option.getGroup());
    if (gr != null) {
      String cat=myMainConfig.getCategory(option.getGroup(),option.getName());
      if (cat != null) {
        usedCategories.add(cat);
      }
      gr.unsetValue(option.getName());
    }
  }
  ZLSimpleConfig setValues=myDeltaConfig.getSetValues();
  for (  ZLGroup group : setValues.groups()) {
    for (    ZLOptionInfo value : group.options()) {
      usedCategories.add(value.getCategory());
      String cat=myMainConfig.getCategory(group.getName(),value.getName());
      if (cat != null) {
        usedCategories.add(cat);
      }
      myMainConfig.setValue(group.getName(),value.getName(),value.getValue(),value.getCategory());
    }
  }
  myDeltaConfig.clear();
  return usedCategories;
}
