{
  super.onStart(intent,startId);
  myStartIds.offer(startId);
  final Uri uri=intent.getData();
  if (uri == null || !BookDownloader.acceptsUri(uri)) {
    stopSelf(myStartIds.poll().intValue());
    return;
  }
  intent.setData(null);
  String host=uri.getHost();
  if (host.equals("www.feedbooks.com")) {
    host="feedbooks.com";
  }
  String dir=Constants.BOOKS_DIRECTORY + "/" + host;
  final List<String> path=uri.getPathSegments();
  for (int i=0; i < path.size() - 1; ++i) {
    dir+='/' + path.get(i);
  }
  final File dirFile=new File(dir);
  dirFile.mkdirs();
  if (!dirFile.isDirectory()) {
    stopSelf(myStartIds.poll().intValue());
    return;
  }
  String fileName=BookDownloader.getFileName(path);
  final File fileFile=new File(dirFile,fileName);
  if (fileFile.exists()) {
    if (!fileFile.isFile()) {
      stopSelf(myStartIds.poll().intValue());
      return;
    }
    runFBReader(fileFile);
    return;
  }
  startFileDownload(uri.toString(),fileFile);
}
