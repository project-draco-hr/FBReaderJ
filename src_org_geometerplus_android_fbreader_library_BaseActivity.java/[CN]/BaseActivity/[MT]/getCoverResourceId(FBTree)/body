{
  final Integer icon=myIconMap.get(tree);
  if (icon != null) {
    return icon.intValue();
  }
 else   if (((LibraryTree)tree).getBook() != null) {
    return R.drawable.ic_list_library_book;
  }
 else   if (tree instanceof FileTree) {
    final ZLFile file=((FileTree)tree).getFile();
    if (file.isArchive()) {
      return R.drawable.ic_list_library_zip;
    }
 else     if (file.isDirectory() && file.isReadable()) {
      return R.drawable.ic_list_library_folder;
    }
 else {
      return R.drawable.ic_list_library_permission_denied;
    }
  }
 else   if (tree instanceof AuthorTree) {
    return R.drawable.ic_list_library_author;
  }
 else   if (tree instanceof TagTree) {
    return R.drawable.ic_list_library_tag;
  }
 else {
    return R.drawable.ic_list_library_books;
  }
}
