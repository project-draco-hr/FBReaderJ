{
  final FBTree tree=getListAdapter().getItem(position);
  if (tree instanceof TopLevelTree) {
    ((TopLevelTree)tree).run();
  }
 else   if (tree instanceof FileItem) {
    final FileItem item=(FileItem)tree;
    final ZLFile file=item.getFile();
    final Book book=item.getBook();
    if (book != null) {
      showBookInfo(book);
    }
 else     if (!file.isReadable()) {
      UIUtil.showErrorMessage(this,"permissionDenied");
    }
 else     if (file.isDirectory() || file.isArchive()) {
      startActivityForResult(new Intent(this,FileManager.class).putExtra(SELECTED_BOOK_PATH_KEY,mySelectedBookPath).putExtra(TREE_KEY_KEY,tree.getUniqueKey()),CHILD_LIST_REQUEST);
    }
  }
 else   if (tree instanceof BookTree) {
    showBookInfo(((BookTree)tree).Book);
  }
 else {
    new OpenTreeRunnable(LibraryInstance,tree).run();
  }
}
