{
  super.onCreate(bundle);
  Thread.setDefaultUncaughtExceptionHandler(new org.geometerplus.zlibrary.ui.android.library.UncaughtExceptionHandler(this));
  requestWindowFeature(Window.FEATURE_NO_TITLE);
  setDefaultKeyMode(DEFAULT_KEYS_SEARCH_LOCAL);
  final SearchManager manager=(SearchManager)getSystemService(SEARCH_SERVICE);
  manager.setOnCancelListener(null);
  final TabHost host=getTabHost();
  LayoutInflater.from(this).inflate(R.layout.bookmarks,host.getTabContentView(),true);
  myAllBooksBookmarks=Library.Instance().Collection.allBookmarks();
  Collections.sort(myAllBooksBookmarks,new Bookmark.ByTimeComparator());
  final Book book=SerializerUtil.deserializeBook(getIntent().getStringExtra(FBReader.BOOK_KEY));
  if (book != null) {
    final long bookId=book.getId();
    for (    Bookmark bm : myAllBooksBookmarks) {
      if (bm.getBookId() == bookId) {
        myThisBookBookmarks.add(bm);
      }
    }
    myThisBookView=createTab("thisBook",R.id.this_book);
    new BookmarksAdapter(myThisBookView,myThisBookBookmarks,true);
  }
 else {
    findViewById(R.id.this_book).setVisibility(View.GONE);
  }
  myAllBooksView=createTab("allBooks",R.id.all_books);
  new BookmarksAdapter(myAllBooksView,myAllBooksBookmarks,false);
  findViewById(R.id.search_results).setVisibility(View.GONE);
}
