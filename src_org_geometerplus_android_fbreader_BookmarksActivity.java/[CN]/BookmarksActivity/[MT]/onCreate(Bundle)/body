{
  super.onCreate(bundle);
  Thread.setDefaultUncaughtExceptionHandler(new org.geometerplus.zlibrary.ui.android.library.UncaughtExceptionHandler(this));
  requestWindowFeature(Window.FEATURE_NO_TITLE);
  setDefaultKeyMode(DEFAULT_KEYS_SEARCH_LOCAL);
  final SearchManager manager=(SearchManager)getSystemService(SEARCH_SERVICE);
  manager.setOnCancelListener(null);
  final TabHost host=getTabHost();
  LayoutInflater.from(this).inflate(R.layout.bookmarks,host.getTabContentView(),true);
  AllBooksBookmarks=Library.Instance().allBookmarks();
  Collections.sort(AllBooksBookmarks,new Bookmark.ByTimeComparator());
  final FBReaderApp fbreader=(FBReaderApp)FBReaderApp.Instance();
  if (fbreader.Model != null) {
    final long bookId=fbreader.Model.Book.getId();
    for (    Bookmark bookmark : AllBooksBookmarks) {
      if (bookmark.getBookId() == bookId) {
        myThisBookBookmarks.add(bookmark);
      }
    }
    myThisBookView=createTab("thisBook",R.id.this_book);
    new BookmarksAdapter(myThisBookView,myThisBookBookmarks,true);
  }
 else {
    findViewById(R.id.this_book).setVisibility(View.GONE);
  }
  myAllBooksView=createTab("allBooks",R.id.all_books);
  new BookmarksAdapter(myAllBooksView,AllBooksBookmarks,false);
  findViewById(R.id.search_results).setVisibility(View.GONE);
}
