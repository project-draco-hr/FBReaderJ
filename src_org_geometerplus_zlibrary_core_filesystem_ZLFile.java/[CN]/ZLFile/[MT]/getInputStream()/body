{
  if (isDirectory()) {
    return null;
  }
  InputStream stream=null;
  int index=ZLFSUtil.findArchiveFileNameDelimiter(myPath);
  if (index == -1) {
    stream=ZLibrary.Instance().getInputStream(myPath);
  }
 else {
    ZLFile baseFile=new ZLFile(myPath.substring(0,index));
    InputStream base=baseFile.getInputStream();
    if (base != null) {
      if (0 != (baseFile.myArchiveType & ArchiveType.ZIP)) {
        final String baseFileName=myPath.substring(0,index);
        ZipFile zf;
synchronized (ourZipFileMap) {
          zf=ourZipFileMap.get(baseFileName);
          if (zf == null) {
            zf=new ZipFile(baseFileName);
            ourZipFileMap.put(baseFileName,zf);
          }
        }
        final String entryName=myPath.substring(index + 1);
        stream=zf.getInputStream(entryName);
      }
 else       if (0 != (baseFile.myArchiveType & ArchiveType.TAR)) {
        stream=new ZLTarInputStream(base,myPath.substring(index + 1));
      }
    }
  }
  if (stream != null) {
    if (0 != (myArchiveType & ArchiveType.GZIP)) {
      return new java.util.zip.GZIPInputStream(stream,8192);
    }
  }
  return stream;
}
