{
  SQLiteStatement statement;
  if (bookmark.getId() == -1) {
    if (myInsertBookmarkStatement == null) {
      myInsertBookmarkStatement=myDatabase.compileStatement("INSERT OR IGNORE INTO Bookmarks (book_id,bookmark_text,creation_time,modification_time,access_time,access_counter,model_id,paragraph,word,char,end_paragraph,end_word,end_character,visible) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?)");
    }
    statement=myInsertBookmarkStatement;
  }
 else {
    if (myUpdateBookmarkStatement == null) {
      myUpdateBookmarkStatement=myDatabase.compileStatement("UPDATE Bookmarks SET book_id = ?, bookmark_text = ?, creation_time =?, modification_time = ?,access_time = ?, access_counter = ?, model_id = ?, paragraph = ?, word = ?, char = ?, end_paragraph = ?, end_word = ?, end_character = ?, visible = ? WHERE bookmark_id = ?");
    }
    statement=myUpdateBookmarkStatement;
  }
  statement.bindLong(1,bookmark.getBookId());
  statement.bindString(2,bookmark.getText());
  SQLiteUtil.bindDate(statement,3,bookmark.getDate(Bookmark.DateType.Creation));
  SQLiteUtil.bindDate(statement,4,bookmark.getDate(Bookmark.DateType.Modification));
  SQLiteUtil.bindDate(statement,5,bookmark.getDate(Bookmark.DateType.Access));
  statement.bindLong(6,bookmark.getAccessCount());
  SQLiteUtil.bindString(statement,7,bookmark.ModelId);
  statement.bindLong(8,bookmark.ParagraphIndex);
  statement.bindLong(9,bookmark.ElementIndex);
  statement.bindLong(10,bookmark.CharIndex);
  final ZLTextPosition end=bookmark.getEnd();
  if (end != null) {
    statement.bindLong(11,end.getParagraphIndex());
    statement.bindLong(12,end.getElementIndex());
    statement.bindLong(13,end.getCharIndex());
  }
 else {
    statement.bindLong(11,bookmark.getLength());
    statement.bindNull(12);
    statement.bindNull(13);
  }
  statement.bindLong(14,bookmark.IsVisible ? 1 : 0);
  if (statement == myInsertBookmarkStatement) {
    return statement.executeInsert();
  }
 else {
    final long id=bookmark.getId();
    statement.bindLong(12,id);
    statement.execute();
    return id;
  }
}
