{
  if (super.onStylusPress(x,y)) {
    return true;
  }
  ZLTextElementArea imageArea=getElementByCoordinates(x,y);
  if ((imageArea != null) && (imageArea.Element instanceof ZLTextImageElement)) {
    ZLTextWordCursor cursor=getStartCursor();
    cursor.moveToParagraph(imageArea.ParagraphNumber);
    cursor.moveTo(imageArea.TextElementNumber,0);
    final ZLTextElement element=cursor.getElement();
    if (!(element instanceof ZLTextImageElement)) {
      return false;
    }
    final ZLTextImageElement imageElement=(ZLTextImageElement)element;
    BookDescription book=collectionModel().bookByParagraphNumber(imageArea.ParagraphNumber);
    if (book == null) {
      return false;
    }
    if (imageElement.getId() == BOOK_INFO_IMAGE_ID) {
      if (new BookInfoDialog(myCollection,book.getFileName()).getDialog().run()) {
        myCollection.rebuild(false);
        myUpdateModel=true;
        selectBook(book);
        repaintView();
      }
      return true;
    }
 else     if (imageElement.getId() == DELETE_IMAGE_ID) {
      String boxKey="removeBookBox";
      final String message;
      final String format=ZLDialogManager.getDialogMessage(boxKey);
      int index=format.indexOf("%s");
      if (index == -1) {
        message=format;
      }
 else {
        message=ZLDialogManager.getDialogMessage(boxKey).substring(0,index) + book.getTitle() + format.substring(index + 2);
      }
      if (ZLDialogManager.getInstance().showQuestionBox(boxKey,message,ZLDialogManager.YES_BUTTON,ZLDialogManager.NO_BUTTON) == 0) {
        new BookList().removeFileName(book.getFileName());
        ZLTextTreeParagraph paragraph=(ZLTextTreeParagraph)collectionModel().getTreeParagraph(imageArea.ParagraphNumber);
        ZLTextTreeParagraph parent=paragraph.getParent();
        if (parent.getChildren().size() == 1) {
          collectionModel().removeParagraph(imageArea.ParagraphNumber);
          collectionModel().removeParagraph(imageArea.ParagraphNumber - 1);
        }
 else {
          collectionModel().removeParagraph(imageArea.ParagraphNumber);
        }
        if (collectionModel().getParagraphsNumber() == 0) {
          this.getStartCursor().setCursor((ZLTextParagraphCursor)null);
        }
        rebuildPaintInfo(true);
        repaintView();
      }
      return true;
    }
    return false;
  }
  int index=getParagraphIndexByCoordinate(y);
  if (index == -1) {
    return false;
  }
  BookDescription book=collectionModel().bookByParagraphNumber(index);
  if (book != null) {
    getFBReader().openBook(book);
    getFBReader().showBookTextView();
    return true;
  }
  return false;
}
