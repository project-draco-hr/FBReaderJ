{
  delayed[0]=false;
  final BitmapCache.Container container=myCoversCache.get(book);
  if (container != null) {
    if (container.Bitmap == null) {
      return null;
    }
    final Bitmap bitmap=getResizedBitmap(container.Bitmap,maxWidth,maxHeight);
    if (bitmap != null) {
      return bitmap;
    }
 else {
      myCoversCache.remove(book);
    }
  }
  final ZLImage image=myCollection.getCover(SerializerUtil.deserializeBook(book),maxWidth,maxHeight);
  if (image == null || !(image instanceof ZLImageProxy)) {
    myCoversCache.put(book,null);
    return null;
  }
  final ZLImageProxy imageProxy=(ZLImageProxy)image;
  myImageSynchronizer.synchronize(imageProxy,new Runnable(){
    @Override public void run(){
      final ZLAndroidImageManager manager=(ZLAndroidImageManager)ZLAndroidImageManager.Instance();
      final ZLAndroidImageData data=manager.getImageData(image);
      myCoversCache.put(book,data != null ? data.getBitmap(maxWidth,maxHeight) : null);
      myCollection.fireBookEvent(BookEvent.CoverSynchronized,SerializerUtil.deserializeBook(book));
    }
  }
);
  if (!imageProxy.isSynchronized()) {
    delayed[0]=true;
    return null;
  }
  return myCoversCache.get(book).Bitmap;
}
