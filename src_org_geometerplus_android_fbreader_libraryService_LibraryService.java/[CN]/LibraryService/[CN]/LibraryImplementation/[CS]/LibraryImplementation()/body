{
  BooksDatabase database=SQLiteBooksDatabase.Instance();
  if (database == null) {
    database=new SQLiteBooksDatabase(LibraryService.this,"LIBRARY SERVICE");
  }
  myCollection=new BookCollection(database);
  for (  String path : myCollection.bookDirectories()) {
    final Observer observer=new Observer(path);
    observer.startWatching();
    myFileObservers.add(observer);
  }
  myCollection.addListener(new BookCollection.Listener(){
    public void onBookEvent(    BookEvent event,    Book book){
      final Intent intent=new Intent(BOOK_EVENT_ACTION);
      intent.putExtra("type",event.toString());
      intent.putExtra("book",SerializerUtil.serialize(book));
      sendBroadcast(intent);
    }
    public void onBuildEvent(    BuildEvent event){
      final Intent intent=new Intent(BUILD_EVENT_ACTION);
      intent.putExtra("type",event.toString());
      sendBroadcast(intent);
    }
  }
);
  myCollection.startBuild();
}
