{
  System.err.println("syncPositions");
  mySyncData.update(myCollection);
  final Map<String,Object> data=new HashMap<String,Object>();
  data.put("generation",mySyncData.Generation.getValue());
  try {
    final String currentBookHash=mySyncData.CurrentBookHash.getValue();
    if (currentBookHash != null) {
      final Map<String,Object> currentBook=new HashMap<String,Object>();
      currentBook.put("hash",currentBookHash);
      currentBook.put("timestamp",mySyncData.currentBookTimestamp());
      data.put("currentbook",currentBook);
    }
    System.err.println("DATA = " + data);
    mySyncPositionsContext.perform(new JsonRequest2(SyncOptions.BASE_URL + "sync/position.exchange",data){
      @Override public void processResponse(      Object response){
        final Map map=(Map)response;
        System.err.println("RESPONSE = " + map);
        final int generation=(int)(long)(Long)map.get("generation");
        mySyncData.Generation.setValue(generation);
      }
    }
);
  }
 catch (  Throwable t) {
    t.printStackTrace();
  }
}
