{
  final ZLTextPlainModel textModel=myCurrentTextModel;
  if (textModel == bookTextModel) {
    if (referenceNumber == -1) {
      referenceNumber=textModel.getParagraphsNumber();
    }
    ZLTextTree parentTree=myCurrentContentsTree;
    if (parentTree.getLevel() > 0) {
      final ZLTextBuffer contentsBuffer=myContentsBuffer;
      if (!contentsBuffer.isEmpty()) {
        parentTree.setText(contentsBuffer.toString());
        contentsBuffer.clear();
      }
 else       if (parentTree.getText() == null) {
        parentTree.setText("...");
      }
    }
 else {
      myContentsBuffer.clear();
    }
    ZLTextTree tree=parentTree.createSubTree();
    Model.ContentsTree.setReference(tree,myCurrentTextModel,referenceNumber);
    myCurrentContentsTree=tree;
  }
}
