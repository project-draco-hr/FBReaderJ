{
  final ZLTextModel textModel=myCurrentTextModel;
  if (textModel == bookTextModel) {
    if (referenceNumber == -1) {
      referenceNumber=textModel.getParagraphsNumber();
    }
    TOCTree parentTree=myCurrentContentsTree;
    if (parentTree.Level > 0) {
      if (myContentsBuffer.length() > 0) {
        parentTree.setText(myContentsBuffer.toString());
        myContentsBuffer.delete(0,myContentsBuffer.length());
      }
 else       if (parentTree.getText() == null) {
        parentTree.setText("...");
      }
    }
 else {
      myContentsBuffer.delete(0,myContentsBuffer.length());
    }
    TOCTree tree=new TOCTree(parentTree);
    tree.setReference(myCurrentTextModel,referenceNumber);
    myCurrentContentsTree=tree;
  }
}
