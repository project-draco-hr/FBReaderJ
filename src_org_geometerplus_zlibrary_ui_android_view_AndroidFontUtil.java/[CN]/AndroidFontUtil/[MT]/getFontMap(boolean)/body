{
  final long timeStamp=System.currentTimeMillis();
  if (forceReload && timeStamp < ourTimeStamp + 1000) {
    forceReload=false;
  }
  ourTimeStamp=timeStamp;
  if (ourFileSet == null || forceReload) {
    final HashSet<File> fileSet=new HashSet<File>();
    final FilenameFilter filter=new FilenameFilter(){
      public boolean accept(      File dir,      String name){
        if (name.startsWith(".")) {
          return false;
        }
        final String lcName=name.toLowerCase();
        return lcName.endsWith(".ttf") || lcName.endsWith(".otf");
      }
    }
;
    final File[] fileList=new File(Paths.FontsDirectoryOption().getValue()).listFiles(filter);
    if (fileList != null) {
      fileSet.addAll(Arrays.asList(fileList));
    }
    if (!fileSet.equals(ourFileSet)) {
      ourFileSet=fileSet;
      ourFontMap=new ZLTTFInfoDetector().collectFonts(fileSet);
    }
  }
  return ourFontMap;
}
