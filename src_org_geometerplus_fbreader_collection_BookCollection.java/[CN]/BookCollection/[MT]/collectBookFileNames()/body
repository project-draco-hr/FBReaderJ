{
  final HashSet dirs=collectDirNames();
  final HashSet bookFileNames=new HashSet();
  for (Iterator it=dirs.iterator(); it.hasNext(); ) {
    final ZLDir dir=new ZLFile((String)it.next()).getDirectory();
    if (dir == null) {
      continue;
    }
    final ArrayList files=dir.collectFiles();
    if (files.isEmpty()) {
      continue;
    }
    final int len=files.size();
    for (int i=0; i < len; ++i) {
      final String fileName=dir.getItemPath((String)files.get(i));
      final ZLFile file=new ZLFile(fileName);
      if (PluginCollection.instance().getPlugin(file,true) != null) {
        bookFileNames.add(fileName);
      }
 else       if (file.getExtension().equals("zip")) {
        if (!BookDescriptionUtil.checkInfo(file)) {
          BookDescriptionUtil.resetZipInfo(file);
          BookDescriptionUtil.saveInfo(file);
        }
        final ArrayList zipEntries=new ArrayList();
        BookDescriptionUtil.listZipEntries(file,zipEntries);
        final int zipEntriesLen=zipEntries.size();
        for (int j=0; j < zipEntriesLen; ++j) {
          final String entryName=(String)zipEntries.get(j);
          if (!bookFileNames.contains(entryName)) {
            bookFileNames.add(entryName);
          }
        }
      }
    }
  }
  bookFileNames.add(getHelpFileName());
  return bookFileNames;
}
