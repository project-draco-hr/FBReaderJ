{
  final FormatPlugin plugin=PluginCollection.Instance().getPlugin(book.File);
  if (plugin == null) {
    throw new BookReadingException("pluginNotFound",book.File.getPath());
  }
  final BookModel model;
switch (plugin.type()) {
case NATIVE:
    model=new NativeBookModel(book);
  break;
case JAVA:
model=new JavaBookModel(book);
break;
default :
throw new BookReadingException("unknownPluginType",plugin.type().toString());
}
plugin.readModel(model);
return model;
}
