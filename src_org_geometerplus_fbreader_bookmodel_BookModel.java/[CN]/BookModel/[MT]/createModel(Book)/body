{
  final FormatPlugin plugin=book.getPlugin();
  System.err.println("using plugin: " + plugin.supportedFileType() + "/"+ plugin.type());
  final BookModel model;
switch (plugin.type()) {
case NATIVE:
    model=new NativeBookModel(book);
  break;
case JAVA:
model=new JavaBookModel(book);
break;
default :
throw new BookReadingException("unknownPluginType",plugin.type().toString(),null);
}
plugin.readModel(model);
return model;
}
