{
  final Item item=getItem(position);
  final View view;
  if (convertView == null) {
    view=LayoutInflater.from(ScanLocalNetworkActivity.this).inflate(R.layout.local_service_item,parent,false);
  }
 else {
    view=convertView;
  }
  final TextView textView=(TextView)view.findViewById(R.id.local_service_text);
  final ImageView iconView=(ImageView)view.findViewById(R.id.local_service_icon);
  final ProgressBar progress=(ProgressBar)view.findViewById(R.id.local_service_progress);
  if (convertView == null) {
    view.measure(ViewGroup.LayoutParams.FILL_PARENT,ViewGroup.LayoutParams.WRAP_CONTENT);
    final int h=view.getMeasuredHeight() * 6 / 10;
    iconView.getLayoutParams().width=h;
    iconView.getLayoutParams().height=h;
    iconView.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
    iconView.requestLayout();
    progress.getLayoutParams().width=h;
    progress.getLayoutParams().height=h;
    iconView.requestLayout();
  }
  textView.setText(item.Name);
  if (item instanceof ServiceInfoItem) {
    iconView.setVisibility(View.VISIBLE);
    progress.setVisibility(View.GONE);
    iconView.setImageResource(R.drawable.ic_list_library_calibre);
  }
 else {
    iconView.setVisibility(View.GONE);
    progress.setVisibility(View.VISIBLE);
  }
  return view;
}
