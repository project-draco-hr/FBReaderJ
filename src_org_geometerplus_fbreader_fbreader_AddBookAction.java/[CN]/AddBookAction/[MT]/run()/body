{
  final FBFileHandler handler=new FBFileHandler();
  Runnable actionOnAccept=new Runnable(){
    public void run(){
      final BookDescription description=handler.getDescription();
      if (description == null) {
        return;
      }
      final BookCollection collection=Reader.CollectionView.Collection;
      final String fileName=description.FileName;
      final Runnable action=new Runnable(){
        public void run(){
          Reader.openFile(fileName);
          collection.rebuild(false);
          new BookList().addFileName(fileName);
          Reader.setMode(FBReader.ViewMode.BOOK_TEXT);
          Reader.refreshWindow();
        }
      }
;
      action.run();
    }
  }
;
  ZLDialogManager.getInstance().runSelectionDialog("addFileDialog",handler,actionOnAccept);
}
