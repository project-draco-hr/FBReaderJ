{
  if (entry.Id != null) {
    return entry.Id.Uri;
  }
  String id=null;
  BookUrlInfo.Format idType=BookUrlInfo.Format.NONE;
  final OPDSNetworkLink opdsLink=(OPDSNetworkLink)myData.Link;
  for (  ATOMLink link : entry.Links) {
    final MimeType mime=MimeType.get(link.getType());
    final String rel=opdsLink.relation(link.getRel(),mime);
    if (rel == null && MimeType.APP_ATOM_XML.weakEquals(mime)) {
      return ZLNetworkUtil.url(myBaseURL,link.getHref());
    }
    BookUrlInfo.Format relType=BookUrlInfo.Format.NONE;
    if (rel == null || rel.startsWith(REL_ACQUISITION_PREFIX) || rel.startsWith(REL_FBREADER_ACQUISITION_PREFIX)) {
      relType=OPDSBookItem.formatByMimeType(mime);
    }
    if (!BookUrlInfo.Format.NONE.equals(relType) && (id == null || idType.compareTo(relType) < 0 || (idType.equals(relType) && REL_ACQUISITION.equals(rel)))) {
      id=ZLNetworkUtil.url(myBaseURL,link.getHref());
      idType=relType;
    }
  }
  return id;
}
