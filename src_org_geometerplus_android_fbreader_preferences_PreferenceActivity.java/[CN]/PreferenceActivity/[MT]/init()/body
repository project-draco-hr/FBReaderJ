{
  final Category libraryCategory=createCategory("Library");
  libraryCategory.addPreference(new ZLStringOptionPreference(this,Paths.BooksDirectoryOption,libraryCategory.Resource,"path"));
  final Category lookNFeelCategory=createCategory("LookNFeel");
  final FBReaderApp fbReader=(FBReaderApp)FBReaderApp.Instance();
  final ZLAndroidApplication androidApp=ZLAndroidApplication.Instance();
  final Screen marginsScreen=lookNFeelCategory.createPreferenceScreen("margins");
  final Category marginsCategory=marginsScreen.createCategory(null);
  marginsCategory.addPreference(new ZLIntegerRangePreference(this,marginsCategory.Resource.getResource("left"),fbReader.LeftMarginOption));
  marginsCategory.addPreference(new ZLIntegerRangePreference(this,marginsCategory.Resource.getResource("right"),fbReader.RightMarginOption));
  marginsCategory.addPreference(new ZLIntegerRangePreference(this,marginsCategory.Resource.getResource("top"),fbReader.TopMarginOption));
  marginsCategory.addPreference(new ZLIntegerRangePreference(this,marginsCategory.Resource.getResource("bottom"),fbReader.BottomMarginOption));
  final Screen appearanceScreen=lookNFeelCategory.createPreferenceScreen("appearanceSettings");
  final Category appearanceCategory=appearanceScreen.createCategory(null);
  final ZLTextStyleCollection collection=ZLTextStyleCollection.Instance();
  final ZLTextBaseStyle baseStyle=collection.getBaseStyle();
  appearanceCategory.addPreference(new FontOption(this,appearanceCategory.Resource,"font",baseStyle.FontFamilyOption));
  appearanceCategory.addPreference(new ZLIntegerRangePreference(this,appearanceCategory.Resource.getResource("fontSize"),baseStyle.FontSizeOption));
  appearanceCategory.addPreference(new ZLBooleanPreference(this,baseStyle.BoldOption,appearanceCategory.Resource,"bold"));
  appearanceCategory.addPreference(new ZLBooleanPreference(this,baseStyle.ItalicOption,appearanceCategory.Resource,"italic"));
  String[] alignments={"left","right","center","justify"};
  appearanceCategory.addPreference(new ZLChoicePreference(this,appearanceCategory.Resource,"alignment",baseStyle.AlignmentOption,alignments));
  appearanceCategory.addPreference(new ZLBooleanPreference(this,baseStyle.AutoHyphenationOption,appearanceCategory.Resource,"autoHyphenations"));
  final ZLOptionsDialog dlg=new OptionsDialog(fbReader).getDialog();
  final Screen formatScreen=appearanceCategory.createPreferenceScreen("format");
  final Screen stylesScreen=appearanceCategory.createPreferenceScreen("styles");
  final Screen colorsScreen=appearanceCategory.createPreferenceScreen("colors");
  formatScreen.setOnPreferenceClickListener(new PreferenceScreen.OnPreferenceClickListener(){
    public boolean onPreferenceClick(    Preference preference){
      dlg.run(0);
      return true;
    }
  }
);
  stylesScreen.setOnPreferenceClickListener(new PreferenceScreen.OnPreferenceClickListener(){
    public boolean onPreferenceClick(    Preference preference){
      dlg.run(1);
      return true;
    }
  }
);
  colorsScreen.setOnPreferenceClickListener(new PreferenceScreen.OnPreferenceClickListener(){
    public boolean onPreferenceClick(    Preference preference){
      dlg.run(2);
      return true;
    }
  }
);
  final Screen statusLineScreen=lookNFeelCategory.createPreferenceScreen("scrollBar");
  final Category statusLineCategory=statusLineScreen.createCategory(null);
  String[] scrollBarTypes={"hide","show","showAsProgress","showAsFooter"};
  statusLineCategory.addPreference(new ZLChoicePreference(this,statusLineCategory.Resource,"scrollbarType",fbReader.ScrollbarTypeOption,scrollBarTypes));
  statusLineCategory.addPreference(new ZLIntegerRangePreference(this,statusLineCategory.Resource.getResource("footerHeight"),fbReader.FooterHeightOption));
  statusLineCategory.addOption(fbReader.FooterShowClockOption,"showClock");
  statusLineCategory.addOption(fbReader.FooterShowBatteryOption,"showBattery");
  statusLineCategory.addOption(fbReader.FooterShowProgressOption,"showProgress");
  statusLineCategory.addOption(fbReader.FooterIsSensitiveOption,"isSensitive");
  statusLineCategory.addPreference(new FontOption(this,statusLineCategory.Resource,"font",fbReader.FooterFontOption));
  lookNFeelCategory.addOption(androidApp.AutoOrientationOption,"autoOrientation");
  if (!androidApp.isAlwaysShowStatusBar()) {
    lookNFeelCategory.addOption(androidApp.ShowStatusBarOption,"showStatusBar");
  }
  lookNFeelCategory.addPreference(new BatteryLevelToTurnScreenOffPreference(this,androidApp.BatteryLevelToTurnScreenOffOption,lookNFeelCategory.Resource,"dontTurnScreenOff"));
  lookNFeelCategory.addPreference(new ZLBooleanPreference(this,fbReader.AllowScreenBrightnessAdjustmentOption,lookNFeelCategory.Resource,"allowScreenBrightnessAdjustment"){
    public void onAccept(){
      super.onAccept();
      if (!isChecked()) {
        androidApp.ScreenBrightnessLevelOption.setValue(0);
      }
    }
  }
);
  final Category scrollingCategory=createCategory("Scrolling");
  final ScrollingPreferences scrollingPreferences=ScrollingPreferences.Instance();
  scrollingCategory.addOption(scrollingPreferences.FlickOption,"flick");
  scrollingCategory.addOption(scrollingPreferences.VolumeKeysOption,"volumeKeys");
  scrollingCategory.addOption(scrollingPreferences.InvertVolumeKeysOption,"invertVolumeKeys");
  scrollingCategory.addOption(scrollingPreferences.AnimateOption,"animated");
  scrollingCategory.addOption(scrollingPreferences.HorizontalOption,"horizontal");
}
