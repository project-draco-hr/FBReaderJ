{
  final LibraryAdapter adapter=(LibraryAdapter)getListView().getAdapter();
  final int position=((AdapterView.AdapterContextMenuInfo)item.getMenuInfo()).position;
  final NetworkTree tree=(NetworkTree)adapter.getItem(position);
switch (item.getItemId()) {
case EXPAND_OR_COLLAPSE_TREE_ITEM_ID:
    adapter.runTreeItem(tree);
  return true;
case DOWNLOAD_BOOK_ITEM_ID:
doDownloadBook(tree,false);
return true;
case DOWNLOAD_DEMO_ITEM_ID:
doDownloadBook(tree,true);
return true;
case READ_BOOK_ITEM_ID:
doReadBook(tree,false);
return true;
case READ_DEMO_ITEM_ID:
doReadBook(tree,true);
return true;
case DELETE_BOOK_ITEM_ID:
tryToDeleteBook(tree);
return true;
}
return super.onContextItemSelected(item);
}
