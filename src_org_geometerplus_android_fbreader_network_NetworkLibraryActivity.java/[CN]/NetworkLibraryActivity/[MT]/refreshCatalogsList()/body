{
  final NetworkView view=NetworkView.Instance();
  final Handler handler=new Handler(){
    @Override public void handleMessage(    Message msg){
      if (msg.obj == null) {
        view.finishBackgroundUpdate();
      }
 else {
        final ZLResource dialogResource=ZLResource.resource("dialog");
        final ZLResource boxResource=dialogResource.getResource("networkError");
        final ZLResource buttonResource=dialogResource.getResource("button");
        new AlertDialog.Builder(NetworkLibraryActivity.this).setTitle(boxResource.getResource("title").getValue()).setMessage((String)msg.obj).setIcon(0).setPositiveButton(buttonResource.getResource("ok").getValue(),null).create().show();
      }
    }
  }
;
  ((ZLAndroidDialogManager)ZLAndroidDialogManager.Instance()).wait("updatingCatalogsList",new Runnable(){
    public void run(){
      final String result=view.runBackgroundUpdate(true);
      handler.sendMessage(handler.obtainMessage(0,result));
    }
  }
,this);
}
