{
  runOnUiThread(new Runnable(){
    public void run(){
switch (code) {
default :
        updateLoadingProgress();
      getListAdapter().replaceAll(getCurrentTree().subTrees());
    break;
case InitializationFailed:
  showInitLibraryDialog((String)params[0]);
break;
case InitializationFinished:
NetworkLibrary.Instance().runBackgroundUpdate(false);
if (myDeferredIntent != null) {
openTreeByIntent(myDeferredIntent);
myDeferredIntent=null;
}
break;
case Found:
openTree((NetworkTree)params[0]);
break;
case NotFound:
UIUtil.showErrorMessage(NetworkLibraryActivity.this,"emptyNetworkSearchResults");
getListView().invalidateViews();
break;
case EmptyCatalog:
UIUtil.showErrorMessage(NetworkLibraryActivity.this,"emptyCatalog");
break;
case NetworkError:
UIUtil.showMessageText(NetworkLibraryActivity.this,(String)params[0]);
break;
}
}
}
);
}
