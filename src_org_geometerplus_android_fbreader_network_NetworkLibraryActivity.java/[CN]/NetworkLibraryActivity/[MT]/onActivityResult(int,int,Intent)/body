{
  Connection.bindToService(this,new Runnable(){
    public void run(){
      getListView().invalidateViews();
    }
  }
);
  if (resultCode != RESULT_OK || data == null) {
    return;
  }
switch (requestCode) {
case REQUEST_MANAGE_CATALOGS:
{
      final ArrayList<String> myIds=data.getStringArrayListExtra(ENABLED_CATALOG_IDS_KEY);
      NetworkLibrary.Instance().setActiveIds(myIds);
      NetworkLibrary.Instance().synchronize();
      break;
    }
case REQUEST_AUTHORISATION_SCREEN:
{
    final String cookies=data.getStringExtra(COOKIES_KEY);
    if (cookies == null) {
      break;
    }
    final CookieStore store=ZLNetworkManager.Instance().cookieStore();
    for (    String pair : cookies.split(";")) {
      final String[] parts=pair.split("=",2);
      if (parts.length != 2) {
        continue;
      }
      final String name=parts[0].trim();
      final String value=parts[1].trim();
      final BasicClientCookie2 c=new BasicClientCookie2(name,value);
      c.setDomain(data.getData().getHost());
      c.setPath("/");
      final Calendar expire=Calendar.getInstance();
      expire.add(Calendar.YEAR,1);
      c.setExpiryDate(expire.getTime());
      c.setSecure(true);
      c.setDiscard(false);
      store.addCookie(c);
    }
    final NetworkTree tree=getTreeByKey((FBTree.Key)data.getSerializableExtra(TREE_KEY_KEY));
    new ReloadCatalogAction(this).run(tree);
    break;
  }
}
}
