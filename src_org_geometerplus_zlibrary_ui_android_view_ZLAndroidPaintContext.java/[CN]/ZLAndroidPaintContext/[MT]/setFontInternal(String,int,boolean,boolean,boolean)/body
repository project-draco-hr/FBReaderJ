{
  final int style=(bold ? Typeface.BOLD : 0) | (italic ? Typeface.ITALIC : 0);
  Typeface[] typefaces=myTypefaces.get(family);
  if (typefaces == null) {
    typefaces=new Typeface[4];
    myTypefaces.put(family,typefaces);
  }
  Typeface typeface=typefaces[style];
  if (typeface == null) {
    File[] table=getFontMap().get(realFontFamilyName(family));
    if (table != null) {
      try {
        if (table[style] != null) {
          typeface=Typeface.createFromFile(table[style]);
        }
 else {
          for (int i=0; i < 4; ++i) {
            if (table[i] != null) {
              typeface=Typeface.createFromFile(table[i]);
              typefaces[i]=typeface;
              break;
            }
          }
        }
      }
 catch (      Throwable e) {
      }
    }
    if (typeface == null) {
      typeface=Typeface.create(family,style);
    }
    typefaces[style]=typeface;
  }
  myTextPaint.setTypeface(typeface);
  myTextPaint.setTextSize(size);
  myTextPaint.setUnderlineText(underline);
}
