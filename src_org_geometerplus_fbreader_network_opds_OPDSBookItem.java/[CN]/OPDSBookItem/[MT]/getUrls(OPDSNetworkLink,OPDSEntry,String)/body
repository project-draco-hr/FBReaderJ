{
  final UrlInfoCollection urls=new UrlInfoCollection();
  for (  ATOMLink link : entry.Links) {
    final String href=ZLNetworkUtil.url(baseUrl,link.getHref());
    final String type=ZLNetworkUtil.filterMimeType(link.getType());
    final String rel=networkLink.relation(link.getRel(),type);
    final UrlInfo.Type referenceType=typeByRelation(rel);
    if (REL_IMAGE_THUMBNAIL.equals(rel) || REL_THUMBNAIL.equals(rel)) {
      if (MIME_IMAGE_PNG.equals(type) || MIME_IMAGE_JPEG.equals(type)) {
        urls.addInfo(new UrlInfo(UrlInfo.Type.Thumbnail,href));
      }
    }
 else     if ((rel != null && rel.startsWith(REL_IMAGE_PREFIX)) || REL_COVER.equals(rel)) {
      if (MIME_IMAGE_PNG.equals(type) || MIME_IMAGE_JPEG.equals(type)) {
        urls.addInfo(new UrlInfo(UrlInfo.Type.Image,href));
      }
    }
 else     if (MIME_APP_ATOM_ENTRY.equals(type)) {
      urls.addInfo(new UrlInfo(UrlInfo.Type.SingleEntry,href));
    }
 else     if (UrlInfo.Type.BookBuy == referenceType) {
      final OPDSLink opdsLink=(OPDSLink)link;
      String price=null;
      final OPDSPrice opdsPrice=opdsLink.selectBestPrice();
      if (opdsPrice != null) {
        price=BookBuyUrlInfo.price(opdsPrice.Price,opdsPrice.Currency);
      }
      if (price == null) {
        price=BookBuyUrlInfo.price(entry.getAttribute(OPDSXMLReader.KEY_PRICE),null);
      }
      if (price == null) {
        price="";
      }
      if (MIME_TEXT_HTML.equals(type)) {
        collectReferences(urls,opdsLink,href,UrlInfo.Type.BookBuyInBrowser,price,true);
      }
 else {
        collectReferences(urls,opdsLink,href,UrlInfo.Type.BookBuy,price,false);
      }
    }
 else     if (referenceType != null) {
      final int format=formatByMimeType(type);
      if (format != BookUrlInfo.Format.NONE) {
        urls.addInfo(new BookUrlInfo(referenceType,format,href));
      }
    }
  }
  return urls;
}
