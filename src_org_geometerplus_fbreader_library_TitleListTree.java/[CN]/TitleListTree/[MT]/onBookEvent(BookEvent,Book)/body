{
  if (book == null) {
    return false;
  }
switch (event) {
case Added:
    if (myDoGroupByFirstLetter) {
      final String letter=book.firstTitleLetter();
      return letter != null && createTitleSubTree(letter);
    }
 else {
      return createBookWithAuthorsSubTree(book);
    }
case Removed:
  if (myDoGroupByFirstLetter) {
    return false;
  }
 else {
    return super.onBookEvent(event,book);
  }
default :
case Updated:
if (myDoGroupByFirstLetter) {
  final String letter=book.firstTitleLetter();
  return letter != null && createTitleSubTree(letter);
}
 else {
  boolean changed=removeBook(book);
  changed|=createBookWithAuthorsSubTree(book);
  return changed;
}
}
}
