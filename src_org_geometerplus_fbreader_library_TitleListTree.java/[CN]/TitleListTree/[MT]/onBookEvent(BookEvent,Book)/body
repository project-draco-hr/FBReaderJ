{
switch (event) {
case Added:
    if (myDoGroupByFirstLetter) {
      final String letter=TitleUtil.firstTitleLetter(book);
      return letter != null && createTitleSubTree(letter);
    }
 else {
      return createBookWithAuthorsSubTree(book);
    }
case Removed:
  if (myDoGroupByFirstLetter) {
    return false;
  }
 else {
    return super.onBookEvent(event,book);
  }
default :
case Updated:
if (myDoGroupByFirstLetter) {
  final String letter=TitleUtil.firstTitleLetter(book);
  return letter != null && createTitleSubTree(letter);
}
 else {
  boolean changed=removeBook(book);
  changed|=containsBook(book) && createBookWithAuthorsSubTree(book);
  return changed;
}
}
}
