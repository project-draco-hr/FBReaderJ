{
  clear();
  myDoGroupByFirstLetter=false;
  final TreeSet<String> letterSet=new TreeSet<String>();
  final List<Book> book=Collection.books();
  final List<String> keys=new ArrayList<String>();
  for (  Book b : book) {
    keys.add(b.getInfo().getSortKey());
  }
  if (keys.size() > 9) {
    for (    String t : keys) {
      final String letter=TitleUtil.firstLetter(t);
      if (letter != null) {
        letterSet.add(letter);
      }
    }
    myDoGroupByFirstLetter=keys.size() > letterSet.size() * 5 / 4;
  }
  if (myDoGroupByFirstLetter) {
    for (    String letter : letterSet) {
      createTitleSubTree(letter);
    }
  }
 else {
    for (    Book b : Collection.books()) {
      createBookWithAuthorsSubTree(b);
    }
  }
}
