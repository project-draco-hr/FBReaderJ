{
switch (myState) {
case READ_NOTHING:
    if (!"bookmark".equals(localName)) {
      throw new SAXException("Unexpected tag " + localName);
    }
  try {
    myId=Long.parseLong(attributes.getValue("id"));
    myIsVisible=Boolean.parseBoolean(attributes.getValue("visible"));
    myState=State.READ_BOOKMARK;
  }
 catch (  Exception e) {
    throw new SAXException("XML parsing error",e);
  }
break;
case READ_BOOKMARK:
if ("book".equals(localName)) {
try {
  myBookId=Long.parseLong(attributes.getValue("id"));
  myBookTitle=attributes.getValue("title");
}
 catch (Exception e) {
  throw new SAXException("XML parsing error",e);
}
}
 else if ("text".equals(localName)) {
myState=State.READ_TEXT;
}
 else if ("history".equals(localName)) {
try {
  myCreationDate=parseDate(attributes.getValue("date-creation"));
  myModificationDate=parseDate(attributes.getValue("date-modification"));
  myAccessDate=parseDate(attributes.getValue("date-access"));
  myAccessCount=Integer.parseInt(attributes.getValue("access-count"));
}
 catch (Exception e) {
  throw new SAXException("XML parsing error",e);
}
}
 else if ("start".equals(localName)) {
try {
  myModelId=attributes.getValue("model");
  myStartParagraphIndex=Integer.parseInt(attributes.getValue("paragraph"));
  myStartElementIndex=Integer.parseInt(attributes.getValue("element"));
  myStartCharIndex=Integer.parseInt(attributes.getValue("char"));
}
 catch (Exception e) {
  throw new SAXException("XML parsing error",e);
}
}
 else if ("end".equals(localName)) {
try {
  final String para=attributes.getValue("paragraph");
  if (para != null) {
    myEndParagraphIndex=Integer.parseInt(para);
    myEndElementIndex=Integer.parseInt(attributes.getValue("element"));
    myEndCharIndex=Integer.parseInt(attributes.getValue("char"));
  }
 else {
    myEndParagraphIndex=Integer.parseInt(attributes.getValue("length"));
    myEndElementIndex=-1;
    myEndCharIndex=-1;
  }
}
 catch (Exception e) {
  throw new SAXException("XML parsing error",e);
}
}
 else if ("style".equals(localName)) {
try {
  myStyle=Integer.parseInt(attributes.getValue("id"));
}
 catch (Exception e) {
  throw new SAXException("XML parsing error",e);
}
}
 else {
throw new SAXException("Unexpected tag " + localName);
}
break;
case READ_TEXT:
throw new SAXException("Unexpected tag " + localName);
}
}
