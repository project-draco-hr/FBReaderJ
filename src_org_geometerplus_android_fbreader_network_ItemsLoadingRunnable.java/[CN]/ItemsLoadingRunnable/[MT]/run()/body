{
  try {
    doBefore();
  }
 catch (  ZLNetworkException e) {
    sendFinish(e.getMessage(),false);
    return;
  }
  String error=null;
  try {
    doLoading(new NetworkOperationData.OnNewItemListener(){
      private long myUpdateTime;
      private int myItemsNumber;
      public void onNewItem(      INetworkLink link,      NetworkItem item){
        addItem(link,item);
        ++myItemsNumber;
        final long now=System.currentTimeMillis();
        if (now > myUpdateTime) {
          updateItemsOnUiThread();
          myUpdateTime=now + myUpdateInterval;
        }
      }
      public boolean confirmInterrupt(){
        return confirmInterruptLoading();
      }
      public void commitItems(      INetworkLink link){
        commitItems(link);
      }
    }
);
  }
 catch (  ZLNetworkException e) {
    error=e.getMessage();
  }
  updateItemsOnUiThread();
  ensureItemsProcessed();
  sendFinish(error,isLoadingInterrupted());
  ensureFinishProcessed();
}
