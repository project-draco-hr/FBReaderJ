{
  final HashSet bookFileNames=new HashSet();
  final ArrayList dirs=collectDirNames();
  final int numberOfDirs=dirs.size();
  for (int i=0; i < numberOfDirs; ++i) {
    final String dirfile=(String)dirs.get(i);
    final ArrayList files=new ArrayList();
    final ZLDir dir=new ZLFile(dirfile).getDirectory();
    if (dir == null) {
      continue;
    }
    final int numberOfFiles=files.size();
    for (int j=0; i < numberOfFiles; ++j) {
      String fileName=dir.getItemPath((String)files.get(j));
      ZLFile file=new ZLFile(fileName);
      if (PluginCollection.instance().getPlugin(file,true) != null) {
        bookFileNames.add(fileName);
      }
 else       if (file.getExtension() == "zip") {
        if (!BookDescriptionUtil.checkInfo(file)) {
          BookDescriptionUtil.resetZipInfo(file);
          BookDescriptionUtil.saveInfo(file);
        }
        final ArrayList zipEntries=new ArrayList();
        BookDescriptionUtil.listZipEntries(file,zipEntries);
        final int numberOfZipEntries=zipEntries.size();
        for (int k=0; k < numberOfZipEntries; ++k) {
          bookFileNames.add(zipEntries.get(i));
        }
      }
    }
  }
  return bookFileNames;
}
