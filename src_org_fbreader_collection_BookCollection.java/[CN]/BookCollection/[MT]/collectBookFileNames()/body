{
  final ArrayList bookFileNames=new ArrayList();
  final ArrayList dirs=collectDirNames();
  final int numberOfDirs=dirs.size();
  for (int i=0; i < numberOfDirs; ++i) {
    final String dirfile=(String)dirs.get(i);
    final ZLDir dir=new ZLFile(dirfile).getDirectory();
    if (dir == null) {
      continue;
    }
    final ArrayList files=dir.collectFiles();
    final int numberOfFiles=files.size();
    for (int j=0; j < numberOfFiles; ++j) {
      String fileName=dir.getItemPath((String)files.get(j));
      ZLFile file=new ZLFile(fileName);
      if (PluginCollection.instance().getPlugin(file,true) != null) {
        if (!bookFileNames.contains(fileName)) {
          bookFileNames.add(fileName);
        }
      }
 else       if (file.getExtension().equals("zip")) {
        if (!BookDescriptionUtil.checkInfo(file)) {
          BookDescriptionUtil.resetZipInfo(file);
          BookDescriptionUtil.saveInfo(file);
        }
        final ArrayList zipEntries=new ArrayList();
        BookDescriptionUtil.listZipEntries(file,zipEntries);
        final int numberOfZipEntries=zipEntries.size();
        for (int k=0; k < numberOfZipEntries; ++k) {
          String str=(String)zipEntries.get(i);
          if (!bookFileNames.contains(str)) {
            bookFileNames.add(str);
          }
        }
      }
    }
  }
  return bookFileNames;
}
