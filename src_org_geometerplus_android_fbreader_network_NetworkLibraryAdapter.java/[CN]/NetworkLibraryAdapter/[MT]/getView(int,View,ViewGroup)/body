{
  final NetworkTree tree=(NetworkTree)getItem(position);
  if (tree == null) {
    throw new IllegalArgumentException("tree == null");
  }
  final ViewHolder holder;
  if (view == null) {
    view=LayoutInflater.from(parent.getContext()).inflate(R.layout.network_tree_item,parent,false);
    if (myCoverWidth == -1) {
      view.measure(ViewGroup.LayoutParams.FILL_PARENT,ViewGroup.LayoutParams.WRAP_CONTENT);
      myCoverHeight=view.getMeasuredHeight();
      myCoverWidth=myCoverHeight * 15 / 32;
      view.requestLayout();
    }
    holder=new ViewHolder();
    holder.nameView=(TextView)view.findViewById(R.id.network_tree_item_name);
    holder.summaryView=(TextView)view.findViewById(R.id.network_tree_item_childrenlist);
    holder.coverView=(ImageView)view.findViewById(R.id.network_tree_item_icon);
    holder.coverView.getLayoutParams().width=myCoverWidth;
    holder.coverView.getLayoutParams().height=myCoverHeight;
    holder.coverView.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
    holder.coverView.requestLayout();
    holder.statusView=(ImageView)view.findViewById(R.id.network_tree_item_status);
    view.setTag(holder);
    numViewHolders++;
  }
 else {
    holder=(ViewHolder)view.getTag();
  }
synchronized (holder) {
    if (holder.tree != tree) {
      if (holder.coverBitmapTask != null) {
        holder.coverBitmapTask.cancel(true);
        holder.coverBitmapTask=null;
      }
      holder.coverBitmapRunnable=null;
    }
    holder.key=tree.getUniqueKey();
    holder.tree=tree;
  }
  holder.nameView.setText(tree.getName());
  holder.summaryView.setText(tree.getSummary());
  setupCover(holder,tree,myCoverWidth,myCoverWidth);
  final int status=(tree instanceof NetworkBookTree) ? NetworkBookActions.getBookStatus(((NetworkBookTree)tree).Book,((NetworkLibraryActivity)getActivity()).Connection) : 0;
  if (status != 0) {
    holder.statusView.setVisibility(View.VISIBLE);
    holder.statusView.setImageResource(status);
  }
 else {
    holder.statusView.setVisibility(View.GONE);
  }
  holder.statusView.requestLayout();
  return view;
}
