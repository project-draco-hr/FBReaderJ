{
  super.onCreate(bundle);
  setContentView(R.layout.books_directory_fix);
  final ZLResource resource=ZLResource.resource("crash").getResource("fixBooksDirectory");
  final ZLResource buttonResource=ZLResource.resource("dialog").getResource("button");
  setTitle(resource.getResource("title").getValue());
  final TextView textView=(TextView)findViewById(R.id.books_directory_fix_text);
  textView.setText(resource.getResource("text").getValue());
  final EditText directoryView=(EditText)findViewById(R.id.books_directory_fix_directory);
  final View buttonsView=findViewById(R.id.books_directory_fix_buttons);
  final Button okButton=(Button)buttonsView.findViewById(R.id.ok_button);
  okButton.setText(buttonResource.getResource("ok").getValue());
  Config.Instance().runOnStart(new Runnable(){
    public void run(){
      final ZLStringOption tempDirectoryOption=Paths.TempDirectoryOption();
      directoryView.setText(tempDirectoryOption.getValue());
      okButton.setOnClickListener(new Button.OnClickListener(){
        public void onClick(        View v){
          final String newDirectory=directoryView.getText().toString();
          tempDirectoryOption.setValue(newDirectory);
          startActivity(new Intent(FixBooksDirectoryActivity.this,FBReader.class));
          finish();
        }
      }
);
    }
  }
);
  final Button cancelButton=(Button)buttonsView.findViewById(R.id.cancel_button);
  cancelButton.setText(buttonResource.getResource("cancel").getValue());
  cancelButton.setOnClickListener(new Button.OnClickListener(){
    public void onClick(    View v){
      finish();
    }
  }
);
}
