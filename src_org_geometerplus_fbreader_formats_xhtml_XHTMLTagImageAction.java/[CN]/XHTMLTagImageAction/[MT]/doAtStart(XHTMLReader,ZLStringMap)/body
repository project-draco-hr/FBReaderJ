{
  String fileName=xmlattributes.getValue(myNameAttribute);
  if (fileName != null) {
    fileName=MiscUtil.decodeHtmlReference(fileName);
    final ZLFile imageFile=ZLFile.createFileByPath(reader.myPathPrefix + fileName);
    if (imageFile != null) {
      final BookReader modelReader=reader.getModelReader();
      boolean flag=modelReader.paragraphIsOpen() && !modelReader.paragraphIsNonEmpty();
      if (flag) {
        modelReader.endParagraph();
      }
      final String imageName=imageFile.getName(false);
      modelReader.addImageReference(imageName,(short)0);
      modelReader.addImage(imageName,new ZLFileImage("image/auto",imageFile));
      if (flag) {
        modelReader.beginParagraph();
      }
    }
  }
}
