{
  String fileName=reader.getAttributeValue(xmlattributes,myNamespace,myNameAttribute);
  if (fileName != null) {
    fileName=MiscUtil.decodeHtmlReference(fileName);
    final ZLFile imageFile=ZLFile.createFileByPath(reader.myPathPrefix + fileName);
    if (imageFile != null) {
      final BookReader modelReader=reader.getModelReader();
      boolean flag=modelReader.paragraphIsOpen() && !modelReader.paragraphIsNonEmpty();
      if (flag) {
        modelReader.endParagraph();
      }
      final String imageName=imageFile.getLongName();
      modelReader.addImageReference(imageName,(short)0,false);
      modelReader.addImage(imageName,new ZLFileImage(MimeType.IMAGE_AUTO,imageFile));
      if (flag) {
        modelReader.beginParagraph();
      }
    }
  }
}
