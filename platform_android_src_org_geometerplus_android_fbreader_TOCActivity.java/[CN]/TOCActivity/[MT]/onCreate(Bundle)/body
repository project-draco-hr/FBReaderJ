{
  super.onCreate(bundle);
  requestWindowFeature(Window.FEATURE_NO_TITLE);
  final FBReader fbreader=(FBReader)ZLApplication.Instance();
  final TOCTree root=fbreader.Model.TOCTree;
  myAdapter=new TOCAdapter(root);
  final ZLTextWordCursor cursor=fbreader.BookTextView.getStartCursor();
  int index=cursor.getParagraphIndex();
  if (cursor.isEndOfParagraph()) {
    ++index;
  }
  TOCTree treeToSelect=null;
  for (int i=0; i < root.getSize(); ++i) {
    final TOCTree tree=root.getTree(i);
    final TOCTree.Reference reference=tree.getReference();
    if (reference == null) {
      continue;
    }
    if (reference.ParagraphIndex > index) {
      break;
    }
    treeToSelect=tree;
  }
  myAdapter.selectItem(treeToSelect);
}
