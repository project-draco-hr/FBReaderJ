{
  super.onCreate(icicle);
  Thread.setDefaultUncaughtExceptionHandler(new org.geometerplus.zlibrary.ui.android.library.UncaughtExceptionHandler(this));
  setContentView(R.layout.authentication);
  final Intent intent=getIntent();
  final String host=intent.getStringExtra(HOST_KEY);
  final String area=intent.getStringExtra(AREA_KEY);
  final String username=intent.getStringExtra(USERNAME_KEY);
  final String error=intent.getStringExtra(ERROR_KEY);
  final String signupUrl=intent.getStringExtra(SIGNUP_URL_KEY);
  setTitle(host);
  myResource=ZLResource.resource("dialog").getResource("AuthenticationDialog");
  if (area != null || !"".equals(area)) {
    findTextView(R.id.authentication_subtitle).setText(area);
  }
 else {
    findTextView(R.id.authentication_subtitle).setVisibility(View.GONE);
  }
  final TextView warningView=findTextView(R.id.authentication_unencrypted_warning);
  warningView.setVisibility(View.GONE);
  findTextView(R.id.authentication_username_label).setText(myResource.getResource("login").getValue());
  findTextView(R.id.authentication_password_label).setText(myResource.getResource("password").getValue());
  final TextView usernameView=findTextView(R.id.authentication_username);
  usernameView.setText(username);
  final TextView errorView=findTextView(R.id.authentication_error);
  if (error != null && !"".equals(error)) {
    errorView.setVisibility(View.VISIBLE);
    errorView.setText(error);
  }
 else {
    errorView.setVisibility(View.GONE);
  }
  if (signupUrl != null) {
  }
 else {
    findViewById(R.id.authentication_signup_box).setVisibility(View.GONE);
  }
  final ZLResource buttonResource=ZLResource.resource("dialog").getResource("button");
  final Button okButton=findButton(R.id.authentication_ok_button);
  okButton.setText(buttonResource.getResource("ok").getValue());
  okButton.setOnClickListener(new Button.OnClickListener(){
    public void onClick(    View v){
      final Intent data=new Intent();
      data.putExtra(USERNAME_KEY,usernameView.getText().toString());
      data.putExtra(PASSWORD_KEY,findTextView(R.id.authentication_password).getText().toString());
      setResult(0,data);
      finish();
    }
  }
);
  final Button cancelButton=findButton(R.id.authentication_cancel_button);
  cancelButton.setText(buttonResource.getResource("cancel").getValue());
  cancelButton.setOnClickListener(new Button.OnClickListener(){
    public void onClick(    View v){
      finish();
    }
  }
);
}
