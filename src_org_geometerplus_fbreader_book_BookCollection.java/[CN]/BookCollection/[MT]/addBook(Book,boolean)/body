{
  if (book == null) {
    return;
  }
synchronized (myBooksByFile) {
    final Book existing=myBooksByFile.get(book.File);
    if (existing == null) {
      myBooksByFile.put(book.File,book);
      myBooksById.put(book.getId(),book);
      fireBookEvent(Listener.BookEvent.Added,book);
    }
 else     if (force) {
      existing.updateFrom(book);
      fireBookEvent(Listener.BookEvent.Updated,existing);
      getBookById(book.getId());
    }
  }
}
