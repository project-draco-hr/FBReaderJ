{
  super.onCreateOptionsMenu(menu);
  addMenuItem(menu,ActionCode.SHOW_LIBRARY,R.drawable.ic_menu_library);
  addMenuItem(menu,ActionCode.SHOW_NETWORK_LIBRARY,R.drawable.ic_menu_networklibrary);
  addMenuItem(menu,ActionCode.SHOW_TOC,R.drawable.ic_menu_toc);
  addMenuItem(menu,ActionCode.SHOW_BOOKMARKS,R.drawable.ic_menu_bookmarks);
  addMenuItem(menu,ActionCode.SWITCH_TO_NIGHT_PROFILE,R.drawable.ic_menu_night);
  addMenuItem(menu,ActionCode.SWITCH_TO_DAY_PROFILE,R.drawable.ic_menu_day);
  addMenuItem(menu,ActionCode.SEARCH,R.drawable.ic_menu_search);
  addMenuItem(menu,ActionCode.SHOW_PREFERENCES);
  addMenuItem(menu,ActionCode.SHOW_BOOK_INFO);
  final Menu subMenu=menu.addSubMenu("Screen orientation");
  addMenuItem(subMenu,ActionCode.SET_SCREEN_ORIENTATION_AUTO);
  addMenuItem(subMenu,ActionCode.SET_SCREEN_ORIENTATION_PORTRAIT);
  addMenuItem(subMenu,ActionCode.SET_SCREEN_ORIENTATION_LANDSCAPE);
  if (ZLibrary.Instance().supportsAllOrientations()) {
    addMenuItem(subMenu,ActionCode.SET_SCREEN_ORIENTATION_REVERSE_PORTRAIT);
    addMenuItem(subMenu,ActionCode.SET_SCREEN_ORIENTATION_REVERSE_LANDSCAPE);
  }
  addMenuItem(menu,ActionCode.INCREASE_FONT);
  addMenuItem(menu,ActionCode.DECREASE_FONT);
  addMenuItem(menu,ActionCode.SHOW_NAVIGATION);
synchronized (myPluginActions) {
    int index=0;
    for (    PluginApi.ActionInfo info : myPluginActions) {
      if (info instanceof PluginApi.MenuActionInfo) {
        addMenuItem(menu,PLUGIN_ACTION_PREFIX + index++,((PluginApi.MenuActionInfo)info).MenuItemName);
      }
    }
  }
  final ZLAndroidApplication application=(ZLAndroidApplication)getApplication();
  application.myMainWindow.refreshMenu();
  return true;
}
