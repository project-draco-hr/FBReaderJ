{
  final LinkedList<Boolean> visibilities=new LinkedList<Boolean>();
  final FBReaderApp fbreader=(FBReaderApp)FBReaderApp.Instance();
  ControlButtonPanel.saveVisibilitiesTo(fbreader,visibilities);
  ControlButtonPanel.hideAllPendingNotify(fbreader);
  final SearchManager manager=(SearchManager)getSystemService(SEARCH_SERVICE);
  manager.setOnCancelListener(new SearchManager.OnCancelListener(){
    public void onCancel(){
      ControlButtonPanel.restoreVisibilitiesFrom(fbreader,visibilities);
      manager.setOnCancelListener(null);
    }
  }
);
  startSearch(fbreader.TextSearchPatternOption.getValue(),true,null,false);
  return true;
}
