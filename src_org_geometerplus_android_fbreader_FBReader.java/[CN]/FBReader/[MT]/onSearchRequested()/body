{
  final FBReaderApp.PopupPanel popup=myFBReaderApp.getActivePopup();
  myFBReaderApp.hideActivePopup();
  final SearchManager manager=(SearchManager)getSystemService(SEARCH_SERVICE);
  manager.setOnCancelListener(new SearchManager.OnCancelListener(){
    public void onCancel(){
      if (popup != null) {
        myFBReaderApp.showPopup(popup.getId());
      }
      manager.setOnCancelListener(null);
    }
  }
);
  startSearch(myFBReaderApp.TextSearchPatternOption.getValue(),true,null,false);
  return true;
}
