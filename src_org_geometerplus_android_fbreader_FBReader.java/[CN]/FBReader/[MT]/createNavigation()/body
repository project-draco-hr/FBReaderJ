{
  final ControlPanel panel=myNavigatePanel.ControlPanel;
  final View layout=getLayoutInflater().inflate(R.layout.navigate,panel,false);
  final SeekBar slider=(SeekBar)layout.findViewById(R.id.book_position_slider);
  final TextView text=(TextView)layout.findViewById(R.id.book_position_text);
  slider.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener(){
    private void gotoPage(    int page){
      final ZLView view=ZLApplication.Instance().getCurrentView();
      if (view instanceof ZLTextView) {
        ZLTextView textView=(ZLTextView)view;
        if (page == 1) {
          textView.gotoHome();
        }
 else {
          textView.gotoPage(page);
        }
        ZLApplication.Instance().repaintView();
      }
    }
    public void onStopTrackingTouch(    SeekBar seekBar){
      myNavigateDragging=false;
    }
    public void onStartTrackingTouch(    SeekBar seekBar){
      myNavigateDragging=true;
    }
    public void onProgressChanged(    SeekBar seekBar,    int progress,    boolean fromUser){
      if (fromUser) {
        final int page=progress + 1;
        final int pagesNumber=seekBar.getMax() + 1;
        text.setText(makeProgressText(page,pagesNumber));
        gotoPage(page);
      }
    }
  }
);
  final Button btnOk=(Button)layout.findViewById(android.R.id.button1);
  final Button btnCancel=(Button)layout.findViewById(android.R.id.button3);
  View.OnClickListener listener=new View.OnClickListener(){
    public void onClick(    View v){
      if (v == btnCancel && myPosition != null) {
        ((ZLTextView)ZLApplication.Instance().getCurrentView()).gotoPosition(myPosition);
      }
      myPosition=null;
      panel.hide(true);
    }
  }
;
  btnOk.setOnClickListener(listener);
  btnCancel.setOnClickListener(listener);
  final ZLResource buttonResource=ZLResource.resource("dialog").getResource("button");
  btnOk.setText(buttonResource.getResource("ok").getValue());
  btnCancel.setText(buttonResource.getResource("cancel").getValue());
  panel.setExtension(layout);
}
