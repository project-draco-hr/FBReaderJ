{
switch (requestCode) {
case REQUEST_PREFERENCES:
    if (resultCode != RESULT_DO_NOTHING) {
      final Book book=BookInfoActivity.bookByIntent(data);
      if (book != null) {
        getCollection().bindToService(this,new Runnable(){
          public void run(){
            onPreferencesUpdate(book);
          }
        }
);
      }
    }
  break;
case REQUEST_CANCEL_MENU:
{
  final CancelMenuHelper.ActionType type=CancelMenuHelper.ActionType.valueOf(data.getStringExtra(CancelActivity.TYPE_KEY));
  myFBReaderApp.runCancelAction(resultCode - 1,type);
  break;
}
}
}
