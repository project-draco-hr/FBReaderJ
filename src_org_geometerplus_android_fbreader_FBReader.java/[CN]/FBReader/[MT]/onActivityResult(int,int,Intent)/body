{
  final FBReaderApp fbreader=(FBReaderApp)FBReaderApp.Instance();
switch (requestCode) {
case REPAINT_CODE:
{
      final BookModel model=fbreader.Model;
      if (model != null) {
        final Book book=model.Book;
        if (book != null) {
          book.reloadInfoFromDatabase();
          ZLTextHyphenator.Instance().load(book.getLanguage());
        }
      }
      fbreader.clearTextCaches();
      fbreader.getViewWidget().repaint();
      break;
    }
case CANCEL_CODE:
  fbreader.runCancelAction(resultCode - 1);
break;
case COLLECT_PLUGINS:
synchronized (myPluginActions) {
final FBReaderApp fbReader=(FBReaderApp)FBReaderApp.Instance();
int index=0;
for (PluginApi.ActionInfo info : myPluginActions) {
  fbReader.removeAction(PLUGIN_ACTION_PREFIX + index++);
}
myPluginActions.clear();
myPluginActions.addAll(PluginApi.getActions(data));
index=0;
for (PluginApi.ActionInfo info : myPluginActions) {
  fbReader.addAction(PLUGIN_ACTION_PREFIX + index++,new RunPluginAction(this,fbReader,info.getId()));
}
}
}
}
