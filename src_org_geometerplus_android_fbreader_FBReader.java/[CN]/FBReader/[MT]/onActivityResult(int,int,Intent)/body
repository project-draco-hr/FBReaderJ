{
switch (requestCode) {
case REQUEST_PREFERENCES:
case REQUEST_BOOK_INFO:
    if (resultCode != RESULT_DO_NOTHING) {
      invalidateOptionsMenu();
      final Book book=BookInfoActivity.bookByIntent(data);
      if (book != null) {
        getCollection().bindToService(this,new Runnable(){
          public void run(){
            myFBReaderApp.Collection.saveBook(book,true);
            onPreferencesUpdate(book);
          }
        }
);
      }
    }
  break;
case REQUEST_CANCEL_MENU:
myFBReaderApp.runCancelAction(resultCode - 1);
break;
}
}
