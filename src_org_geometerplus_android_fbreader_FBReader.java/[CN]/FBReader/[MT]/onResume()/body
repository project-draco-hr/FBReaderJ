{
  super.onResume();
  bindService(new Intent(this,SyncService.class),mySyncConnection,SyncService.BIND_AUTO_CREATE);
  myStartTimer=true;
  Config.Instance().runOnConnect(new Runnable(){
    public void run(){
      final int brightnessLevel=getZLibrary().ScreenBrightnessLevelOption.getValue();
      if (brightnessLevel != 0) {
        setScreenBrightness(brightnessLevel);
      }
 else {
        setScreenBrightnessAuto();
      }
      if (getZLibrary().DisableButtonLightsOption.getValue()) {
        setButtonLight(false);
      }
      getCollection().bindToService(FBReader.this,new Runnable(){
        public void run(){
          final BookModel model=myFBReaderApp.Model;
          if (model == null || model.Book == null) {
            return;
          }
          onPreferencesUpdate(myFBReaderApp.Collection.getBookById(model.Book.getId()));
        }
      }
);
    }
  }
);
  registerReceiver(myBatteryInfoReceiver,new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
  IsPaused=false;
  if (OnResumeAction != null) {
    OnResumeAction.run();
    OnResumeAction=null;
  }
  PopupPanel.restoreVisibilities(myFBReaderApp);
  ApiServerImplementation.sendEvent(this,ApiListener.EVENT_READ_MODE_OPENED);
}
