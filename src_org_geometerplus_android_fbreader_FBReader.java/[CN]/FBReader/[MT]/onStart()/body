{
  super.onStart();
  getCollection().bindToService(this,new Runnable(){
    public void run(){
      new Thread(){
        public void run(){
          openBook(getIntent(),getPostponedInitAction(),false);
          myFBReaderApp.getViewWidget().repaint();
        }
      }
.start();
      myFBReaderApp.getViewWidget().repaint();
    }
  }
);
  initPluginActions();
  final ZLAndroidLibrary zlibrary=getZLibrary();
  Config.Instance().runOnStart(new Runnable(){
    public void run(){
      final boolean showStatusBar=zlibrary.ShowStatusBarOption.getValue();
      if (showStatusBar != myShowStatusBarFlag) {
        finish();
        startActivity(new Intent(FBReader.this,FBReader.class));
      }
      getSharedPreferences("fbreader.ui",MODE_PRIVATE).edit().putBoolean("statusBar",showStatusBar).commit();
      SetScreenOrientationAction.setOrientation(FBReader.this,zlibrary.getOrientationOption().getValue());
    }
  }
);
  ((PopupPanel)myFBReaderApp.getPopupById(TextSearchPopup.ID)).setPanelInfo(this,myRootView);
  ((PopupPanel)myFBReaderApp.getPopupById(NavigationPopup.ID)).setPanelInfo(this,myRootView);
  ((PopupPanel)myFBReaderApp.getPopupById(SelectionPopup.ID)).setPanelInfo(this,myRootView);
}
