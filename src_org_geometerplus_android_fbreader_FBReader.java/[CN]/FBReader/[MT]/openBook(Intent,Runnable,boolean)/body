{
  if (!force && myBook != null) {
    return;
  }
  myBook=SerializerUtil.deserializeBook(intent.getStringExtra(BOOK_KEY));
  final Bookmark bookmark=SerializerUtil.deserializeBookmark(intent.getStringExtra(BOOKMARK_KEY));
  if (myBook == null) {
    final Uri data=intent.getData();
    if (data != null) {
      myBook=createBookForFile(ZLFile.createFileByPath(data.getPath()));
    }
  }
  if (myBook != null) {
    ZLFile file=myBook.File;
    if (!file.exists()) {
      if (file.getPhysicalFile() != null) {
        file=file.getPhysicalFile();
      }
      UIUtil.showErrorMessage(this,"fileNotFound",file.getPath());
      myBook=null;
    }
  }
  Config.Instance().runOnStart(new Runnable(){
    public void run(){
      myFBReaderApp.openBook(myBook,bookmark,action);
    }
  }
);
}
