{
  ListIterator<FBTree> nodeIterator=subTrees().listIterator();
  final Set<NetworkBookItem.AuthorData> authorsSet=Result.BooksMap.keySet();
  for (  NetworkBookItem.AuthorData author : authorsSet) {
    if (nodeIterator != null) {
      if (nodeIterator.hasNext()) {
        FBTree currentNode=nodeIterator.next();
        if (!(currentNode instanceof NetworkAuthorTree)) {
          throw new RuntimeException("That's impossible!!!");
        }
        NetworkAuthorTree child=(NetworkAuthorTree)currentNode;
        if (!child.Author.equals(author)) {
          throw new RuntimeException("That's impossible!!!");
        }
        LinkedList<NetworkBookItem> authorBooks=Result.BooksMap.get(author);
        child.updateSubTrees(authorBooks);
        continue;
      }
      nodeIterator=null;
    }
    LinkedList<NetworkBookItem> authorBooks=Result.BooksMap.get(author);
    if (authorBooks.size() != 0) {
      NetworkAuthorTree child=new NetworkAuthorTree(this,author);
      child.updateSubTrees(authorBooks);
    }
  }
  if (nodeIterator != null && nodeIterator.hasNext()) {
    throw new RuntimeException("That's impossible!!!");
  }
}
