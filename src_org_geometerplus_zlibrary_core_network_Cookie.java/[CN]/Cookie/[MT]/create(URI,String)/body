{
  if (uri == null || cookieString == null) {
    return null;
  }
  final String host=uri.getHost();
  if (host == null) {
    return null;
  }
  final String[] parts=cookieString.split(";");
  if (parts.length == 0) {
    return null;
  }
  final String mainPart=parts[0].trim();
  int index=mainPart.indexOf('=');
  if (index == -1) {
    return null;
  }
  final String name=mainPart.substring(0,index).trim();
  final String value=mainPart.substring(index + 1).trim();
  if ("".equals(name) || "".equals(value)) {
    return null;
  }
  boolean secure=false;
  boolean discard=false;
  String path="/";
  Date dateOfExpiration=null;
  List<Integer> ports=null;
  for (int i=1; i < parts.length; ++i) {
    final String p=parts[i].trim();
    if ("secure".equalsIgnoreCase(p)) {
      secure=true;
      continue;
    }
    if ("discard".equalsIgnoreCase(p)) {
      discard=true;
      continue;
    }
    index=p.indexOf('=');
    if (index == -1) {
      continue;
    }
    final String pName=p.substring(0,index).trim();
    final String pValue=p.substring(index + 1).trim();
    System.err.println("NAME " + pName);
    if ("expires".equalsIgnoreCase(pName)) {
      try {
        System.err.println("VALUE " + pValue);
        dateOfExpiration=ourDateFormat.parse(pValue);
        System.err.println("DATE = " + dateOfExpiration);
      }
 catch (      ParseException e) {
      }
    }
 else     if ("max-age".equalsIgnoreCase(pName)) {
      try {
        final int seconds=Integer.parseInt(pValue);
        dateOfExpiration=new Date(System.currentTimeMillis() + seconds * 1000);
        System.err.println("DATE = " + dateOfExpiration);
      }
 catch (      NumberFormatException e) {
      }
    }
 else     if ("domain".equalsIgnoreCase(pName)) {
      if (!pValue.startsWith(".") || !host.endsWith(pValue)) {
        return null;
      }
    }
 else     if ("path".equalsIgnoreCase(pName)) {
      path=pValue;
    }
 else     if ("port".equalsIgnoreCase(pName)) {
    }
  }
  return new Cookie(name,value,host,path,ports,dateOfExpiration,secure,discard);
}
