{
  final View layout=activity.getLayoutInflater().inflate(R.layout.network_authentication_dialog,null);
  final TextView login=(TextView)layout.findViewById(R.id.network_authentication_login);
  final TextView password=(TextView)layout.findViewById(R.id.network_authentication_password);
  login.measure(ViewGroup.LayoutParams.FILL_PARENT,ViewGroup.LayoutParams.WRAP_CONTENT);
  password.measure(ViewGroup.LayoutParams.FILL_PARENT,ViewGroup.LayoutParams.WRAP_CONTENT);
  final TextView loginText=(TextView)layout.findViewById(R.id.network_authentication_login_text);
  loginText.setText(myResource.getResource("login").getValue());
  loginText.getLayoutParams().height=login.getMeasuredHeight();
  final TextView passwordText=(TextView)layout.findViewById(R.id.network_authentication_password_text);
  passwordText.setText(myResource.getResource("password").getValue());
  passwordText.getLayoutParams().height=password.getMeasuredHeight();
  final NetworkAuthenticationManager mgr=myLink.authenticationManager();
  final ZLResource buttonResource=ZLResource.resource("dialog").getResource("button");
  final Handler handler=new DialogHandler(activity);
  return new AlertDialog.Builder(activity).setView(layout).setTitle(myResource.getResource("title").getValue()).setPositiveButton(buttonResource.getResource("ok").getValue(),new DialogInterface.OnClickListener(){
    public void onClick(    DialogInterface dialog,    int which){
      AlertDialog alert=(AlertDialog)dialog;
      final TextView loginView=(TextView)alert.findViewById(R.id.network_authentication_login);
      final TextView passwordView=(TextView)alert.findViewById(R.id.network_authentication_password);
      final String login=loginView.getText().toString();
      final String password=passwordView.getText().toString();
      mgr.UserNameOption.setValue(login);
      handler.sendMessage(handler.obtainMessage(1,password));
    }
  }
).setNegativeButton(buttonResource.getResource("cancel").getValue(),new DialogInterface.OnClickListener(){
    public void onClick(    DialogInterface dialog,    int which){
      handler.sendEmptyMessage(0);
    }
  }
).create();
}
