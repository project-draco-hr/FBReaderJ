{
  AlertDialog alert=(AlertDialog)dialog;
  final String login=((TextView)alert.findViewById(R.id.network_authentication_login)).getText().toString().trim();
  final String password=((TextView)alert.findViewById(R.id.network_authentication_password)).getText().toString();
  if (login.length() == 0) {
    final String err=myResource.getResource("loginIsEmpty").getValue();
    sendError(true,false,err);
    return;
  }
  final NetworkAuthenticationManager mgr=myLink.authenticationManager();
  mgr.UserNameOption.setValue(login);
  final Runnable runnable=new Runnable(){
    public void run(){
      try {
        mgr.authorise(password);
      }
 catch (      ZLNetworkException e) {
        mgr.logOut();
        sendError(true,false,e.getMessage());
        return;
      }
      if (mgr.needsInitialization()) {
        try {
          mgr.initialize();
        }
 catch (        ZLNetworkException e) {
          mgr.logOut();
          sendError(true,false,e.getMessage());
          return;
        }
      }
      sendSuccess(false);
    }
  }
;
  AndroidUtil.wait("authentication",runnable,myActivity);
}
