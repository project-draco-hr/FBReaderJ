{
  final OPDSLink opdsLink=(OPDSLink)myData.Link;
  NetworkLibraryItem.Link coverURL=null;
  NetworkLibraryItem.Link url=null;
  boolean urlIsAlternate=false;
  NetworkLibraryItem.Link htmlURL=null;
  boolean litresCatalogue=false;
  int catalogType=NetworkCatalogItem.CATALOG_OTHER;
  for (  ATOMLink link : entry.Links) {
    final String href=link.getHref();
    final String type=link.getType();
    final String rel=opdsLink.relation(filter(link.getRel()),type);
    if (type == NetworkImage.MIME_PNG || type == NetworkImage.MIME_JPEG) {
      if (rel == OPDSConstants.REL_THUMBNAIL || (coverURL == null && rel == OPDSConstants.REL_COVER)) {
        coverURL=new NetworkLibraryItem.Link(href,type);
      }
    }
 else     if (type == OPDSConstants.MIME_APP_ATOM) {
      if (rel == ATOMConstants.REL_ALTERNATE) {
        if (url == null) {
          url=new NetworkLibraryItem.Link(href,type);
          urlIsAlternate=true;
        }
      }
 else {
        url=new NetworkLibraryItem.Link(href,type);
        urlIsAlternate=false;
        if (rel == OPDSConstants.REL_CATALOG_AUTHOR) {
          catalogType=NetworkCatalogItem.CATALOG_BY_AUTHORS;
        }
      }
    }
 else     if (type == OPDSConstants.MIME_TEXT_HTML) {
      if (rel == OPDSConstants.REL_ACQUISITION || rel == ATOMConstants.REL_ALTERNATE || rel == null) {
        htmlURL=new NetworkLibraryItem.Link(href,type);
      }
    }
 else     if (type == OPDSConstants.MIME_APP_LITRES) {
      if (rel == OPDSConstants.REL_BOOKSHELF) {
        litresCatalogue=true;
        url=new NetworkLibraryItem.Link(href,type);
      }
    }
  }
  if (url == null && htmlURL == null) {
    return null;
  }
  if (url != null && !urlIsAlternate) {
    htmlURL=null;
  }
  final boolean dependsOnAccount=opdsLink.getCondition(entry.Id.Uri) == OPDSLink.FeedCondition.SIGNED_IN;
  final String annotation;
  if (entry.Summary == null) {
    annotation=null;
  }
 else {
    annotation=entry.Summary.replace("\011","").replace("\012","");
  }
  HashMap<Integer,NetworkLibraryItem.Link> urlMap=new HashMap<Integer,NetworkLibraryItem.Link>();
  if (coverURL != null) {
    urlMap.put(NetworkLibraryItem.URL_COVER,coverURL);
  }
  if (url != null) {
    url.URL=ZLNetworkUtil.url(myBaseURL,url.URL);
    urlMap.put(NetworkLibraryItem.URL_CATALOG,url);
  }
  if (htmlURL != null) {
    htmlURL.URL=ZLNetworkUtil.url(myBaseURL,htmlURL.URL);
    urlMap.put(NetworkLibraryItem.URL_HTML_PAGE,htmlURL);
  }
  if (litresCatalogue) {
    return null;
  }
 else {
    return new OPDSCatalogItem(opdsLink,entry.Title,annotation,urlMap,dependsOnAccount ? NetworkCatalogItem.VISIBLE_LOGGED_USER : NetworkCatalogItem.VISIBLE_ALWAYS,catalogType);
  }
}
