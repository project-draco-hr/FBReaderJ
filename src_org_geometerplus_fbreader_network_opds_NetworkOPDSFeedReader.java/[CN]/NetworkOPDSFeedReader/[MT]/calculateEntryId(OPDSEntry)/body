{
  if (entry.Id != null) {
    return entry.Id.Uri;
  }
  String id=null;
  int idType=0;
  final OPDSNetworkLink opdsLink=(OPDSNetworkLink)myData.Link;
  for (  ATOMLink link : entry.Links) {
    final String type=ZLNetworkUtil.filterMimeType(link.getType());
    final String rel=opdsLink.relation(link.getRel(),type);
    if (rel == null && OPDSConstants.MIME_APP_ATOM.equals(type)) {
      return ZLNetworkUtil.url(myBaseURL,link.getHref());
    }
    int relType=BookReference.Format.NONE;
    if (rel == null || rel.startsWith(OPDSConstants.REL_ACQUISITION_PREFIX) || rel.startsWith(OPDSConstants.REL_FBREADER_ACQUISITION_PREFIX)) {
      relType=formatByMimeType(type);
    }
    if (relType != BookReference.Format.NONE && (id == null || idType < relType || (idType == relType && OPDSConstants.REL_ACQUISITION.equals(rel)))) {
      id=ZLNetworkUtil.url(myBaseURL,link.getHref());
      idType=relType;
    }
  }
  return id;
}
