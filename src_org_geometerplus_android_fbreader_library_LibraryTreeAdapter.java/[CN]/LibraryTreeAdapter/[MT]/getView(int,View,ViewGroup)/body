{
  final LibraryTree tree=(LibraryTree)getItem(position);
  final View view=createView(convertView,parent,tree);
  if (getActivity().isTreeSelected(tree)) {
    view.setBackgroundColor(0xff555555);
  }
 else {
    view.setBackgroundColor(0);
  }
  if (myCoverManager == null) {
    view.measure(ViewGroup.LayoutParams.FILL_PARENT,ViewGroup.LayoutParams.WRAP_CONTENT);
    final int height=view.getMeasuredHeight();
    myCoverManager=new CoverManager(getActivity(),height * 15 / 32,height);
    view.requestLayout();
  }
  CoverHolder holder=(CoverHolder)view.getTag();
  if (holder == null) {
    final ImageView coverView=(ImageView)view.findViewById(R.id.library_tree_item_icon);
    holder=new CoverHolder(myCoverManager,coverView,tree.getUniqueKey());
    view.setTag(holder);
  }
 else {
    holder.setKey(tree.getUniqueKey());
  }
  if (!myCoverManager.trySetCoverImage(holder,tree)) {
    holder.CoverView.setImageResource(getCoverResourceId(tree));
  }
  return view;
}
