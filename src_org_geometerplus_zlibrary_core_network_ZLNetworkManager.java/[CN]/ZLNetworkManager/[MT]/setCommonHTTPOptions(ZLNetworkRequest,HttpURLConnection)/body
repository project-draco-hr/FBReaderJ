{
  httpConnection.setInstanceFollowRedirects(true);
  httpConnection.setConnectTimeout(15000);
  httpConnection.setReadTimeout(30000);
  httpConnection.setRequestProperty("User-Agent",ZLNetworkUtil.getUserAgent());
  httpConnection.setRequestProperty("Accept-Language",Locale.getDefault().getLanguage());
  httpConnection.setAllowUserInteraction(false);
  if (httpConnection instanceof HttpsURLConnection) {
    HttpsURLConnection httpsConnection=(HttpsURLConnection)httpConnection;
    final ArrayList<TrustManager> managers=new ArrayList<TrustManager>();
    collectStandardTrustManagers(managers);
    if (request.SSLCertificate != null) {
      managers.add(createZLTrustManager(request.SSLCertificate));
    }
    try {
      SSLContext context=SSLContext.getInstance("TLS");
      context.init(null,managers.toArray(new TrustManager[]{}),null);
      httpsConnection.setSSLSocketFactory(context.getSocketFactory());
    }
 catch (    GeneralSecurityException ex) {
      throw new ZLNetworkException(ZLNetworkException.ERROR_SSL_SUBSYSTEM,ex);
    }
  }
}
