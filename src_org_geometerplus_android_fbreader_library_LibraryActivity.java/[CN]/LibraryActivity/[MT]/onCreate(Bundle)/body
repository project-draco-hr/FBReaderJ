{
  super.onCreate(icicle);
  myDatabase=SQLiteBooksDatabase.Instance();
  if (myDatabase == null) {
    myDatabase=new SQLiteBooksDatabase(this,"LIBRARY");
  }
  if (myLibrary == null) {
    myLibrary=new Library();
    myLibrary.addChangeListener(this);
    myLibrary.startBuild();
  }
  final String selectedBookPath=getIntent().getStringExtra(SELECTED_BOOK_PATH_KEY);
  mySelectedBook=null;
  if (selectedBookPath != null) {
    final ZLFile file=ZLFile.createFileByPath(selectedBookPath);
    if (file != null) {
      mySelectedBook=Book.getByFile(file);
    }
  }
  final ListAdapter adapter=new LibraryListAdapter(this);
  if ("3".equals(new android.os.Build.VERSION().SDK)) {
    getWindow().setFeatureInt(Window.FEATURE_PROGRESS,Window.PROGRESS_VISIBILITY_ON);
  }
  init(getIntent());
  getListView().setTextFilterEnabled(true);
  getListView().setOnCreateContextMenuListener(this);
}
