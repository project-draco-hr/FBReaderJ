{
  super.onCreate(icicle);
  mySelectedBook=FBReaderIntents.getBookExtra(getIntent());
  new LibraryTreeAdapter(this);
  getListView().setTextFilterEnabled(true);
  getListView().setOnCreateContextMenuListener(this);
  deleteRootTree();
  final BookCollectionShadow collection=new BookCollectionShadow();
  collection.bindToService(this,new Runnable(){
    public void run(){
      setProgressBarIndeterminateVisibility(!collection.status().IsCompleted);
      myRootTree=new RootTree(collection);
      collection.addListener(LibraryActivity.this);
      init(getIntent());
    }
  }
);
}
