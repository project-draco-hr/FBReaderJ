{
switch (itemId) {
case OPEN_BOOK_ITEM_ID:
    FBReader.openBookActivity(this,book,null);
  return true;
case SHOW_BOOK_INFO_ITEM_ID:
showBookInfo(book);
return true;
case SHARE_BOOK_ITEM_ID:
FBUtil.shareBook(this,book);
return true;
case ADD_TO_FAVORITES_ITEM_ID:
book.addLabel(Book.FAVORITE_LABEL);
myRootTree.Collection.saveBook(book,false);
return true;
case REMOVE_FROM_FAVORITES_ITEM_ID:
book.removeLabel(Book.FAVORITE_LABEL);
myRootTree.Collection.saveBook(book,false);
if (getCurrentTree().onBookEvent(BookEvent.Updated,book)) {
getListAdapter().replaceAll(getCurrentTree().subtrees());
getListView().invalidateViews();
}
return true;
case MARK_AS_READ_ITEM_ID:
book.addLabel(Book.READ_LABEL);
myRootTree.Collection.saveBook(book,false);
getListView().invalidateViews();
return true;
case MARK_AS_UNREAD_ITEM_ID:
book.removeLabel(Book.READ_LABEL);
myRootTree.Collection.saveBook(book,false);
getListView().invalidateViews();
return true;
case DELETE_BOOK_ITEM_ID:
tryToDeleteBook(book);
return true;
}
return false;
}
