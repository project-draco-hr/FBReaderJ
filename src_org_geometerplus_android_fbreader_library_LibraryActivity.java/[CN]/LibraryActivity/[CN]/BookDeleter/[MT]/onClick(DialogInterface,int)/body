{
  if (getCurrentTree() instanceof FileTree) {
    for (    Book book : myBooks) {
      getListAdapter().remove(new FileTree((FileTree)getCurrentTree(),book.File));
      myRootTree.Collection.removeBook(book,true);
    }
    getListView().invalidateViews();
  }
 else {
    boolean doReplace=false;
    for (    Book book : myBooks) {
      doReplace|=getCurrentTree().onBookEvent(BookEvent.Removed,book);
      myRootTree.Collection.removeBook(book,true);
    }
    if (doReplace) {
      getListAdapter().replaceAll(getCurrentTree().subtrees(),true);
    }
  }
}
