{
  if (myNCXTOCFileName != null) {
    NCXReader ncxReader=new NCXReader(myModelReader);
    if (ncxReader.read(ZLFile.createFileByPath(myFilePrefix + myNCXTOCFileName))) {
      final Map<Integer,NCXReader.NavPoint> navigationMap=ncxReader.navigationMap();
      if (!navigationMap.isEmpty()) {
        int level=0;
        for (        NCXReader.NavPoint point : navigationMap.values()) {
          final BookModel.Label label=myModelReader.Model.getLabel(point.ContentHRef);
          int index=(label != null) ? label.ParagraphIndex : -1;
          while (level > point.Level) {
            myModelReader.endContentsParagraph();
            --level;
          }
          while (++level <= point.Level) {
            myModelReader.beginContentsParagraph(-2);
            myModelReader.addContentsData(Dots);
          }
          myModelReader.beginContentsParagraph(index);
          myModelReader.addContentsData(point.Text.toCharArray());
        }
        while (level > 0) {
          myModelReader.endContentsParagraph();
          --level;
        }
        return;
      }
    }
  }
  for (  Reference ref : myTourTOC.isEmpty() ? myGuideTOC : myTourTOC) {
    final BookModel.Label label=myModelReader.Model.getLabel(ref.HRef);
    if (label != null) {
      final int index=label.ParagraphIndex;
      if (index != -1) {
        myModelReader.beginContentsParagraph(index);
        myModelReader.addContentsData(ref.Title.toCharArray());
        myModelReader.endContentsParagraph();
      }
    }
  }
}
