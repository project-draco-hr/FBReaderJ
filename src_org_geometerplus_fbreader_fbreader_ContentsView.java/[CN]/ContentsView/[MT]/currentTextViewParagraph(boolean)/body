{
  final FBReader fbreader=(FBReader)ZLApplication.Instance();
  final ZLTextWordCursor cursor=fbreader.BookTextView.StartCursor;
  if (!cursor.isNull()) {
    int reference=cursor.getParagraphCursor().Index;
    boolean startOfParagraph=cursor.getWordIndex() == 0;
    if (cursor.isEndOfParagraph()) {
      ++reference;
      startOfParagraph=true;
    }
    final int length=getModel().getParagraphsNumber();
    final ContentsModel contentsModel=(ContentsModel)getModel();
    final ZLTextModel currentModel=(ZLTextModel)fbreader.BookTextView.getModel();
    for (int i=1; i < length; ++i) {
      final ContentsModel.Reference contentsReference=contentsModel.getReference(contentsModel.getTreeParagraph(i));
      if ((contentsReference.Model == currentModel) && ((contentsReference.ParagraphIndex > reference) || (!includeStart && startOfParagraph && (contentsReference.ParagraphIndex == reference)))) {
        return i - 1;
      }
    }
    return length - 1;
  }
  return -1;
}
