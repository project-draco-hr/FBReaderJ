{
  if (dir.equalsToPath(getLocation()))   return false;
  setLocation(dir,new TaskListener(){
    IFile mLastPath=getLocation();
    @Override public void onFinish(    boolean ok,    Object any){
      if (ok) {
        mHistory.truncateAfter(mLastPath);
        mHistory.push(dir);
        mFullHistory.push(dir);
        if (mFileProvider.getFilterMode() != IFileProvider.FilterMode.AnyDirectories) {
          if (!(((File)dir).canWrite())) {
            mBtnOk.setEnabled(false);
            mViewCreateFolder.setEnabled(false);
          }
 else {
            mBtnOk.setEnabled(true);
            mViewCreateFolder.setEnabled(true);
          }
        }
      }
    }
  }
);
  return true;
}
