{
  super.onCreate();
  final ConfigShadow config=new ConfigShadow(this);
  new ZLAndroidImageManager();
  new ZLAndroidLibrary(this);
  config.runOnConnect(new Runnable(){
    public void run(){
      if ("".equals(Paths.TempDirectoryOption.getValue())) {
        String dir=null;
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.FROYO) {
          final File d=getExternalCacheDir();
          if (d != null) {
            d.mkdirs();
            if (d.exists() && d.isDirectory()) {
              dir=d.getPath();
            }
          }
        }
        if (dir == null) {
          dir=Paths.mainBookDirectory() + "/.FBReader";
        }
        Paths.TempDirectoryOption.setValue(dir);
      }
    }
  }
);
}
