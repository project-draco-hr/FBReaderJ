{
  super.onCreate();
  final ConfigShadow config=new ConfigShadow(this);
  new ZLAndroidImageManager();
  new ZLAndroidLibrary(this);
  config.runOnConnect(new Runnable(){
    public void run(){
      if ("".equals(Paths.TempDirectoryOption.getValue())) {
        String dir=null;
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.FROYO) {
          dir=getExternalCacheDirPath();
        }
        if (dir == null) {
          dir=Paths.mainBookDirectory() + "/.FBReader";
        }
        Paths.TempDirectoryOption.setValue(dir);
      }
    }
  }
);
}
