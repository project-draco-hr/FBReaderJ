{
  super.onCreate(icicle);
  final Intent intent=getIntent();
  if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
    final String pattern=intent.getStringExtra(SearchManager.QUERY);
    final Handler successHandler=new Handler(){
      public void handleMessage(      Message message){
        onSuccess();
      }
    }
;
    final Handler failureHandler=new Handler(){
      private AlertDialog myAlertDialog;
      public void handleMessage(      Message message){
switch (message.what) {
case 0:
          onFailure();
        myAlertDialog=new AlertDialog.Builder(getParentActivity()).setMessage(ZLResource.resource("errorMessage").getResource(getFailureMessageResourceKey()).getValue()).create();
      myAlertDialog.show();
    break;
case 1:
  myAlertDialog.dismiss();
break;
}
}
}
;
ZLDialogManager.Instance().wait(getWaitMessageResourceKey(),new Runnable(){
public void run(){
if (runSearch(pattern)) {
successHandler.sendEmptyMessage(0);
}
 else {
failureHandler.sendEmptyMessage(0);
new Thread(new Runnable(){
public synchronized void run(){
  try {
    wait(3000);
  }
 catch (  InterruptedException e) {
  }
  failureHandler.sendEmptyMessage(1);
}
}
).start();
}
}
}
);
}
finish();
}
