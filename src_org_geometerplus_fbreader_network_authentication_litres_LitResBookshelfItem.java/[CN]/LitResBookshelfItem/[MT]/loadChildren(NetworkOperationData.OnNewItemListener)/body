{
  final LitResAuthenticationManager mgr=(LitResAuthenticationManager)Link.authenticationManager();
  if (!mgr.mayBeAuthorised(true)) {
    throw new ZLNetworkException(NetworkException.ERROR_AUTHENTICATION_FAILED);
  }
  try {
    if (myForceReload) {
      mgr.reloadPurchasedBooks();
    }
  }
  finally {
    myForceReload=true;
    LinkedList<NetworkLibraryItem> children=new LinkedList<NetworkLibraryItem>();
    mgr.collectPurchasedBooks(children);
    if (children.size() <= 5) {
      Collections.sort(children,new NetworkBookItemComparator());
      for (      NetworkLibraryItem item : children) {
        listener.onNewItem(Link,item);
      }
    }
 else {
      listener.onNewItem(Link,new SortedCatalogItem(this,children));
      listener.onNewItem(Link,new SortedCatalogItem(this,children));
      listener.onNewItem(Link,new SortedCatalogItem(this,children));
    }
    listener.commitItems(Link);
  }
}
