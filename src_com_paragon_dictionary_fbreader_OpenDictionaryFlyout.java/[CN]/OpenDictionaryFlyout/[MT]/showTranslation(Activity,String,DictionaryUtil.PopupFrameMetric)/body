{
  if (!myDictionary.isTranslationAsTextSupported())   openTextInDictionary(text);
  if (popupFrame == null)   popupFrame=createPopup(activity);
  titleLabel.setText(myDictionary.getName());
  openDictionaryButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      openTextInDictionary(text);
      popupFrame.dismiss();
    }
  }
);
  activity.getCurrentFocus().setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View view){
      popupFrame.dismiss();
    }
  }
);
  activity.getCurrentFocus().setOnTouchListener(new View.OnTouchListener(){
    @Override public boolean onTouch(    View view,    MotionEvent motionEvent){
      if (popupFrame.isShowing()) {
        popupFrame.dismiss();
        return true;
      }
      return false;
    }
  }
);
  articleView.loadData("","text/text","UTF-8");
  showFrame(activity,frameMetrics);
  myDictionary.getTranslationAsText(text,TranslateMode.SHORT,TranslateFormat.HTML,new Dictionary.TranslateAsTextListener(){
    @Override public void onComplete(    String s,    TranslateMode translateMode){
      final String url=saveArticle(s.replace("</BODY>","<br><br></BODY>"),activity.getApplicationContext());
      if (url == null || url.isEmpty())       openTextInDictionary(text);
 else       articleView.loadUrl(url);
    }
    @Override public void onWordNotFound(    ArrayList<String> similarWords){
      popupFrame.dismiss();
      openTextInDictionary(text);
    }
    @Override public void onError(    com.paragon.open.dictionary.api.Error error){
      popupFrame.dismiss();
    }
    @Override public void onIPCError(    String s){
      popupFrame.dismiss();
    }
  }
);
}
