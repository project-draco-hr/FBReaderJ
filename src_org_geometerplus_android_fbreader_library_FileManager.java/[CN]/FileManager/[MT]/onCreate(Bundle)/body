{
  super.onCreate(savedInstanceState);
  FileListAdapter adapter=new FileListAdapter();
  setListAdapter(adapter);
  final Bundle extras=getIntent().getExtras();
  myPath=extras != null ? extras.getString(FILE_MANAGER_PATH) : null;
  if (myPath == null) {
    setTitle(myResource.getResource("fileTree").getValue());
    addItem(Paths.BooksDirectoryOption().getValue(),"fileTreeLibrary");
    addItem("/","fileTreeRoot");
    addItem(Environment.getExternalStorageDirectory().getPath(),"fileTreeCard");
  }
 else {
    setTitle(myPath);
    startUpdate();
  }
  getListView().setOnCreateContextMenuListener(adapter);
  getListView().setTextFilterEnabled(true);
  getListView().setOnItemClickListener(new AdapterView.OnItemClickListener(){
    public void onItemClick(    AdapterView<?> parent,    View view,    int position,    long id){
      runItem(((FileListAdapter)getListAdapter()).getItem(position));
    }
  }
);
}
