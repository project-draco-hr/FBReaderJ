{
  final List<FBTree> subtrees=parent.subTrees();
  if (position == -1) {
    position=subtrees.size();
  }
 else   if (position < 0 || position > subtrees.size()) {
    throw new IndexOutOfBoundsException("`position` value equals " + position + " but must be in range [0; "+ subtrees.size()+ "]");
  }
  if (item instanceof NetworkCatalogItem) {
    NetworkCatalogItem catalogItem=(NetworkCatalogItem)item;
    if (!NetworkCatalogTree.processAccountDependent(catalogItem)) {
      return null;
    }
    NetworkCatalogTree tree=new NetworkCatalogTree(parent,catalogItem,position);
    catalogItem.onDisplayItem();
    return tree;
  }
 else   if (item instanceof NetworkBookItem) {
    return new NetworkBookTree(parent,(NetworkBookItem)item,position);
  }
  return null;
}
