{
  final HashMap<String,File[]> fonts=new HashMap<String,File[]>();
  if (files == null) {
    return fonts;
  }
  for (  File f : files) {
    InputStream stream=null;
    try {
      stream=new FileInputStream(f);
      final ZLTTFInfo info=detectInfo(stream);
      if (info != null && info.FamilyName != null) {
        File[] table=fonts.get(info.FamilyName);
        if (table == null) {
          table=new File[4];
          fonts.put(info.FamilyName,table);
        }
        if ("bold".equalsIgnoreCase(info.SubFamilyName)) {
          table[1]=f;
        }
 else         if ("italic".equalsIgnoreCase(info.SubFamilyName) || "oblique".equalsIgnoreCase(info.SubFamilyName)) {
          table[2]=f;
        }
 else         if ("bold italic".equalsIgnoreCase(info.SubFamilyName) || "bold oblique".equalsIgnoreCase(info.SubFamilyName)) {
          table[3]=f;
        }
 else {
          table[0]=f;
        }
      }
    }
 catch (    IOException e) {
    }
 finally {
      if (stream != null) {
        try {
          stream.close();
        }
 catch (        IOException e1) {
        }
      }
    }
  }
  return fonts;
}
