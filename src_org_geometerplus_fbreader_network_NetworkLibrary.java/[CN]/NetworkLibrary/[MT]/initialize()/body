{
  final LinksComparator comparator=new LinksComparator();
  try {
    OPDSLinkReader.loadOPDSLinks(OPDSLinkReader.CACHE_LOAD,new OnNewLinkListener(){
      public void onNewLink(      INetworkLink link){
        addLinkInternal(myLoadedLinks,link,comparator);
      }
    }
);
  }
 catch (  ZLNetworkException e) {
synchronized (myLinks) {
      myLoadedLinks.clear();
    }
    throw e;
  }
  NetworkDatabase.Instance().loadCustomLinks(new NetworkDatabase.ICustomLinksHandler(){
    public void handleCustomLinkData(    int id,    String siteName,    String title,    String summary,    String icon,    Map<String,String> links){
      final ICustomNetworkLink link=OPDSLinkReader.createCustomLink(id,siteName,title,summary,icon,links);
      if (link != null) {
        addLinkInternal(myCustomLinks,link,comparator);
        link.setSaveLinkListener(myChangesListener);
      }
    }
  }
);
}
