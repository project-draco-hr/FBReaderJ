{
synchronized (myBackgroundLock) {
    System.err.println("runBackgroundUpdate 0");
    myBackgroundLinks=new ArrayList<INetworkLink>();
    final int cacheMode=clearCache ? OPDSLinkReader.CACHE_CLEAR : OPDSLinkReader.CACHE_UPDATE;
    try {
      OPDSLinkReader.loadOPDSLinks(cacheMode,new OnNewLinkListener(){
        public void onNewLink(        INetworkLink link){
          myBackgroundLinks.add(link);
        }
      }
);
    }
 catch (    ZLNetworkException e) {
      myBackgroundLinks=null;
      throw e;
    }
 finally {
      System.err.println("runBackgroundUpdate 0.1");
      if (myBackgroundLinks != null) {
        System.err.println("runBackgroundUpdate 0.2");
        if (myBackgroundLinks.isEmpty()) {
          System.err.println("runBackgroundUpdate 0.3");
          myBackgroundLinks=null;
        }
      }
    }
    System.err.println("runBackgroundUpdate 1");
    final List<INetworkLink> linksCopy=new ArrayList<INetworkLink>(myLinks);
    for (    INetworkLink link : linksCopy) {
      if (link instanceof ICustomNetworkLink) {
        final ICustomNetworkLink customLink=(ICustomNetworkLink)link;
        if (customLink.isObsolete(12 * 60 * 60* 1000)) {
          customLink.reloadInfo(true);
          NetworkDatabase.Instance().saveLink(customLink);
        }
      }
    }
    System.err.println("runBackgroundUpdate 2");
  }
}
