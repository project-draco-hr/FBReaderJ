{
  super(context,rootResource,resourceKey);
  myBook=book;
  final TreeMap<String,String> map=new TreeMap<String,String>();
  for (  String code : ZLLanguageUtil.languageCodes()) {
    map.put(ZLLanguageUtil.languageName(code),code);
  }
  final int size=map.size();
  String[] codes=new String[size + 1];
  String[] names=new String[size + 1];
  int index=0;
  for (  Map.Entry<String,String> entry : map.entrySet()) {
    codes[index]=entry.getValue();
    names[index]=entry.getKey();
    ++index;
  }
  codes[size]=ZLLanguageUtil.OTHER_LANGUAGE_CODE;
  names[size]=ZLLanguageUtil.languageName(codes[size]);
  setLists(codes,names);
  String language=myBook.getLanguage();
  if (language == null) {
    language=ZLLanguageUtil.OTHER_LANGUAGE_CODE;
  }
  if (!setInitialValue(language)) {
    setInitialValue(ZLLanguageUtil.OTHER_LANGUAGE_CODE);
  }
}
