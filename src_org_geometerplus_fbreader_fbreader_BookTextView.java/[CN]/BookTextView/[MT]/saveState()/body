{
  if (getModel() == null) {
    return;
  }
  final String group=getFileName();
  new ZLIntegerOption(ZLOption.STATE_CATEGORY,group,BUFFER_SIZE,0).setValue(myPositionStack.size());
  new ZLIntegerOption(ZLOption.STATE_CATEGORY,group,POSITION_IN_BUFFER,0).setValue(myCurrentPointInStack);
  final ZLIntegerOption option=new ZLIntegerOption(ZLOption.STATE_CATEGORY,group,"",0);
  for (int i=0; i < myPositionStack.size(); ++i) {
    Position position=(Position)myPositionStack.get(i);
    option.changeName(PARAGRAPH_PREFIX + i);
    int paragraphIndex=position.ParagraphIndex + position.ModelIndex;
    for (int j=0; j < position.ModelIndex; j++) {
      paragraphIndex+=getParagraphsNumber(j);
    }
    option.setValue(paragraphIndex);
    option.changeName(CHAR_PREFIX + i);
    option.setValue(position.CharIndex);
    option.changeName(WORD_PREFIX + i);
    option.setValue(position.WordIndex);
  }
}
