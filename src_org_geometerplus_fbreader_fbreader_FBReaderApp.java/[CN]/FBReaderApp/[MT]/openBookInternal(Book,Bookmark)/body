{
  if (book == null) {
    book=Library.Instance().getRecentBook();
    if (book == null || !book.File.exists()) {
      book=Book.getByFile(Library.getHelpFile());
    }
    if (book == null) {
      return;
    }
  }
  if (Model != null) {
    if (bookmark == null & book.File.getPath().equals(Model.Book.File.getPath())) {
      return;
    }
  }
  if (book != null) {
    onViewChanged();
    if (Model != null) {
      Model.Book.storePosition(BookTextView.getStartCursor());
    }
    BookTextView.setModel(null);
    FootnoteView.setModel(null);
    clearTextCaches();
    Model=null;
    System.gc();
    System.gc();
    try {
      Model=BookModel.createModel(book);
      ZLTextHyphenator.Instance().load(book.getLanguage());
      BookTextView.setModel(Model.getTextModel());
      BookTextView.gotoPosition(book.getStoredPosition());
      if (bookmark == null) {
        setView(BookTextView);
      }
 else {
        gotoBookmark(bookmark);
      }
      Library.Instance().addBookToRecentList(book);
      final StringBuilder title=new StringBuilder(book.getTitle());
      if (!book.authors().isEmpty()) {
        boolean first=true;
        for (        Author a : book.authors()) {
          title.append(first ? " (" : ", ");
          title.append(a.DisplayName);
          first=false;
        }
        title.append(")");
      }
      setTitle(title.toString());
    }
 catch (    BookReadingException e) {
      processException(e);
    }
  }
  getViewWidget().reset();
  getViewWidget().repaint();
}
