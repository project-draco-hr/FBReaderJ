{
  if (book == null) {
    book=Library.Instance().Collection.getRecentBook(0);
    if (book == null || !book.File.exists()) {
      book=Book.getByFile(BookCollection.getHelpFile());
    }
    if (book == null) {
      return;
    }
  }
  if (!force && Model != null && book.equals(Model.Book)) {
    if (bookmark != null) {
      gotoBookmark(bookmark);
    }
    return;
  }
  onViewChanged();
  storePosition();
  BookTextView.setModel(null);
  FootnoteView.setModel(null);
  clearTextCaches();
  Model=null;
  System.gc();
  System.gc();
  try {
    Model=BookModel.createModel(book);
    ZLTextHyphenator.Instance().load(book.getLanguage());
    BookTextView.setModel(Model.getTextModel());
    BookTextView.gotoPosition(book.getStoredPosition());
    if (bookmark == null) {
      setView(BookTextView);
    }
 else {
      gotoBookmark(bookmark);
    }
    Library.Instance().addBookToRecentList(book);
    final StringBuilder title=new StringBuilder(book.getTitle());
    if (!book.authors().isEmpty()) {
      boolean first=true;
      for (      Author a : book.authors()) {
        title.append(first ? " (" : ", ");
        title.append(a.DisplayName);
        first=false;
      }
      title.append(")");
    }
    setTitle(title.toString());
  }
 catch (  BookReadingException e) {
    processException(e);
  }
  getViewWidget().reset();
  getViewWidget().repaint();
}
