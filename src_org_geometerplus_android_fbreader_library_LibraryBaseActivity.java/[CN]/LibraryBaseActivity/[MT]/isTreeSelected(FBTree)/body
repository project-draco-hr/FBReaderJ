{
  if (mySelectedBook == null) {
    return false;
  }
  if (tree instanceof BookTree) {
    return mySelectedBook.equals(((BookTree)tree).Book);
  }
  if (tree instanceof AuthorTree) {
    return mySelectedBook.authors().contains(((AuthorTree)tree).Author);
  }
  if (tree instanceof SeriesTree) {
    final SeriesInfo info=mySelectedBook.getSeriesInfo();
    final String series=((SeriesTree)tree).Series;
    return info != null && series != null && series.equals(info.Name);
  }
  if (tree instanceof TagTree) {
    final Tag tag=((TagTree)tree).Tag;
    for (    Tag t : mySelectedBook.tags()) {
      for (; t != null; t=t.Parent) {
        if (t == tag) {
          return true;
        }
      }
    }
    return false;
  }
  return false;
}
