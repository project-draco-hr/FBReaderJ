{
  myControlPanel=new ControlPanel(activity,root,true);
  final View layout=activity.getLayoutInflater().inflate(R.layout.navigate,myControlPanel,false);
  final SeekBar slider=(SeekBar)layout.findViewById(R.id.book_position_slider);
  final TextView text=(TextView)layout.findViewById(R.id.book_position_text);
  slider.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener(){
    private void gotoPage(    int page){
      final ZLTextView view=Reader.getTextView();
      if (page == 1) {
        view.gotoHome();
      }
 else {
        view.gotoPage(page);
      }
      Reader.resetView();
      Reader.repaintView();
    }
    public void onStopTrackingTouch(    SeekBar seekBar){
      myIsInProgress=false;
    }
    public void onStartTrackingTouch(    SeekBar seekBar){
      myIsInProgress=true;
    }
    public void onProgressChanged(    SeekBar seekBar,    int progress,    boolean fromUser){
      if (fromUser) {
        final int page=progress + 1;
        final int pagesNumber=seekBar.getMax() + 1;
        text.setText(makeProgressText(page,pagesNumber));
        gotoPage(page);
      }
    }
  }
);
  final Button btnOk=(Button)layout.findViewById(android.R.id.button1);
  final Button btnCancel=(Button)layout.findViewById(android.R.id.button3);
  View.OnClickListener listener=new View.OnClickListener(){
    public void onClick(    View v){
      final ZLTextWordCursor position=StartPosition;
      if (v == btnCancel && position != null) {
        Reader.getTextView().gotoPosition(position);
      }
 else       if (v == btnOk) {
        storePosition();
      }
      StartPosition=null;
      hide(true);
    }
  }
;
  btnOk.setOnClickListener(listener);
  btnCancel.setOnClickListener(listener);
  final ZLResource buttonResource=ZLResource.resource("dialog").getResource("button");
  btnOk.setText(buttonResource.getResource("ok").getValue());
  btnCancel.setText(buttonResource.getResource("cancel").getValue());
  myControlPanel.addView(layout);
}
