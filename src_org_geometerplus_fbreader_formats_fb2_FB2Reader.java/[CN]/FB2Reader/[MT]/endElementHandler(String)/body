{
  final byte tag=myTagStack[--myTagStackSize];
switch (tag) {
case FB2Tag.P:
    myBookReader.endParagraph();
  break;
case FB2Tag.SUB:
myBookReader.addControl(FBTextKind.SUB,false);
break;
case FB2Tag.SUP:
myBookReader.addControl(FBTextKind.SUP,false);
break;
case FB2Tag.CODE:
myBookReader.addControl(FBTextKind.CODE,false);
break;
case FB2Tag.EMPHASIS:
myBookReader.addControl(FBTextKind.EMPHASIS,false);
break;
case FB2Tag.STRONG:
myBookReader.addControl(FBTextKind.STRONG,false);
break;
case FB2Tag.STRIKETHROUGH:
myBookReader.addControl(FBTextKind.STRIKETHROUGH,false);
break;
case FB2Tag.V:
case FB2Tag.SUBTITLE:
case FB2Tag.TEXT_AUTHOR:
case FB2Tag.DATE:
myBookReader.popKind();
myBookReader.endParagraph();
break;
case FB2Tag.CITE:
case FB2Tag.EPIGRAPH:
myBookReader.popKind();
break;
case FB2Tag.POEM:
myInsidePoem=false;
break;
case FB2Tag.STANZA:
myBookReader.beginParagraph(ZLTextParagraph.Kind.AFTER_SKIP_PARAGRAPH);
myBookReader.endParagraph();
myBookReader.beginParagraph(ZLTextParagraph.Kind.EMPTY_LINE_PARAGRAPH);
myBookReader.endParagraph();
myBookReader.popKind();
break;
case FB2Tag.SECTION:
if (myReadMainText) {
myBookReader.endContentsParagraph();
--mySectionDepth;
mySectionStarted=false;
}
 else {
myBookReader.unsetCurrentTextModel();
}
break;
case FB2Tag.ANNOTATION:
myBookReader.popKind();
if (myBodyCounter == 0) {
myBookReader.insertEndOfSectionParagraph();
myBookReader.unsetCurrentTextModel();
}
break;
case FB2Tag.TITLE:
myBookReader.popKind();
myBookReader.exitTitle();
myInsideTitle=false;
break;
case FB2Tag.BODY:
myBookReader.popKind();
myReadMainText=false;
myBookReader.unsetCurrentTextModel();
break;
case FB2Tag.A:
myBookReader.addControl(myHyperlinkType,false);
break;
case FB2Tag.COVERPAGE:
if (myBodyCounter == 0) {
myInsideCoverpage=false;
myBookReader.insertEndOfSectionParagraph();
myBookReader.unsetCurrentTextModel();
}
break;
case FB2Tag.BINARY:
if (myCurrentImage != null) {
myCurrentImage.close();
myCurrentImage=null;
}
break;
default :
break;
}
return false;
}
