{
  myURL=uri.toString();
  if (isEmptyString(uri.getScheme())) {
    myURL="http://" + myURL;
    uri=Uri.parse(myURL);
  }
 else   if ("opds".equals(uri.getScheme())) {
    myURL="http" + uri.toString().substring(4);
  }
  setTextById(R.id.add_custom_catalog_url,myURL);
  String siteName=uri.getHost();
  if (isEmptyString(siteName)) {
    setErrorByKey("invalidUrl");
    return;
  }
  if (siteName.startsWith("www.")) {
    siteName=siteName.substring(4);
  }
  final ICustomNetworkLink link=OPDSLinkReader.createCustomLinkWithoutInfo(siteName,myURL);
  final Runnable loadInfoRunnable=new Runnable(){
    private String myError;
    public void run(){
      try {
        myError=null;
        link.reloadInfo();
      }
 catch (      ZLNetworkException e) {
        myError=e.getMessage();
      }
      runOnUiThread(new Runnable(){
        public void run(){
          if (myError == null) {
            setTextById(R.id.add_custom_catalog_title,link.getTitle());
            setTextById(R.id.add_custom_catalog_summary,link.getSummary());
            setExtraFieldsVisibility(true);
          }
 else {
            runErrorDialog(myError);
          }
        }
      }
);
      setErrorText(myError);
    }
  }
;
  UIUtil.wait("loadingCatalogInfo",loadInfoRunnable,this);
}
