{
  final String textUrl=getTextById(R.id.add_custom_catalog_url);
  if (isEmptyString(textUrl)) {
    setErrorByKey("urlIsEmpty");
    return;
  }
  final String title=getTextById(R.id.add_custom_catalog_title);
  final String summary=getTextById(R.id.add_custom_catalog_summary);
  Uri uri=null;
  try {
    uri=Uri.parse(textUrl);
    if (isEmptyString(uri.getScheme())) {
      uri=Uri.parse("http://" + textUrl);
    }
    if (isEmptyString(uri.getHost())) {
      setErrorByKey("invalidUrl");
      return;
    }
  }
 catch (  Throwable t) {
    setErrorByKey("invalidUrl");
    return;
  }
  if (!getExtraFieldsVisibility()) {
    loadInfoByUri(uri);
  }
 else   if (isEmptyString(title)) {
    setErrorByKey("titleIsEmpty");
  }
 else {
    final String action=myCatalogId == null ? NetworkLibraryActivity.ADD_CATALOG : NetworkLibraryActivity.EDIT_CATALOG;
    final Intent intent=new Intent(action,uri,AddCustomCatalogActivity.this,NetworkLibraryActivity.class).putExtra(NetworkLibraryActivity.ADD_CATALOG_TITLE_KEY,title).putExtra(NetworkLibraryActivity.ADD_CATALOG_SUMMARY_KEY,summary).addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
    if (myCatalogId != null) {
      intent.putExtra(NetworkLibraryActivity.EDIT_CATALOG_ID_KEY,(int)myCatalogId);
    }
    startActivity(intent);
    finish();
  }
}
