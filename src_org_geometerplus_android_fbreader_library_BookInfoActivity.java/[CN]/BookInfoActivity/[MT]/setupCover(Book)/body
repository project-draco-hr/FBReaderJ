{
  final ImageView coverView=(ImageView)findViewById(R.id.book_cover);
  final DisplayMetrics metrics=new DisplayMetrics();
  getWindowManager().getDefaultDisplay().getMetrics(metrics);
  final int maxHeight=metrics.heightPixels * 2 / 3;
  final int maxWidth=maxHeight * 2 / 3;
  coverView.setVisibility(View.GONE);
  coverView.setImageDrawable(null);
  final ZLImage image=LibraryUtil.getCover(book);
  if (image == null) {
    return;
  }
  if (image instanceof ZLLoadableImage) {
    final ZLLoadableImage loadableImage=(ZLLoadableImage)image;
    if (!loadableImage.isSynchronized()) {
      loadableImage.synchronize();
    }
  }
  final ZLAndroidImageData data=((ZLAndroidImageManager)ZLAndroidImageManager.Instance()).getImageData(image);
  if (data == null) {
    return;
  }
  final Bitmap coverBitmap=data.getBitmap(2 * maxWidth,2 * maxHeight);
  if (coverBitmap == null) {
    return;
  }
  coverView.setVisibility(View.VISIBLE);
  coverView.getLayoutParams().width=maxWidth;
  coverView.getLayoutParams().height=maxHeight;
  coverView.setImageBitmap(coverBitmap);
}
