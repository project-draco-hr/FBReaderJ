{
  if (fileType == null) {
    return null;
  }
  if (formatType == FormatPlugin.Type.ANY) {
    FormatPlugin p=getPlugin(fileType,FormatPlugin.Type.NATIVE);
    if (p == null) {
      p=getPlugin(fileType,FormatPlugin.Type.JAVA);
    }
    return p;
  }
 else {
    final List<FormatPlugin> list=myPlugins.get(formatType);
    if (list == null) {
      return null;
    }
    for (    FormatPlugin p : list) {
      if (fileType.Id.equalsIgnoreCase(p.supportedFileType())) {
        return p;
      }
    }
    return null;
  }
}
