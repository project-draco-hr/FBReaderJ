{
  if (fileType == null || formatType == null) {
    return null;
  }
switch (formatType) {
case ANY:
{
      FormatPlugin p=getPlugin(fileType,FormatPlugin.Type.BUILTIN);
      if (p == null) {
        p=getPlugin(fileType,FormatPlugin.Type.EXTERNAL);
      }
      return p;
    }
default :
{
    final List<FormatPlugin> list=myPlugins.get(formatType);
    if (list == null) {
      return null;
    }
    for (    FormatPlugin p : list) {
      if (fileType.Id.equalsIgnoreCase(p.supportedFileType())) {
        return p;
      }
    }
    return null;
  }
}
}
