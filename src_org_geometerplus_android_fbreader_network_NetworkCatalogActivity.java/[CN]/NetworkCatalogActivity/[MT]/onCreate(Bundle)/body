{
  super.onCreate(icicle);
  requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
  final NetworkView networkView=NetworkView.Instance();
  if (!networkView.isInitialized()) {
    finish();
    return;
  }
  final Intent intent=getIntent();
  final int level=intent.getIntExtra(CATALOG_LEVEL_KEY,-1);
  if (level == -1) {
    throw new RuntimeException("Catalog's Level was not specified!!!");
  }
  myCatalogKey=intent.getStringExtra(CATALOG_KEY_KEY);
  if (myCatalogKey == null) {
    throw new RuntimeException("Catalog's Key was not specified!!!");
  }
  myTree=networkView.getOpenedTree(level);
  networkView.setOpenedActivity(myCatalogKey,this);
  setListAdapter(new CatalogAdapter());
  getListView().invalidateViews();
  setupTitle();
  if (myTree instanceof NetworkCatalogTree && Util.isAccountRefillingSupported(this,((NetworkCatalogTree)myTree).Item.Link)) {
    setDefaultTree(new RefillAccountTree((NetworkCatalogTree)myTree));
  }
}
