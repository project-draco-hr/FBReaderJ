{
  if (myAllFilesAreRead) {
    return;
  }
  myAllFilesAreRead=true;
  MyBufferedInputStream baseStream=getBaseStream();
  baseStream.setPosition(0);
  myFileHeaders.clear();
  try {
    while (true) {
      int header=baseStream.read4Bytes();
      if (header != LocalFileHeader.FILE_HEADER_SIGNATURE) {
        if (header == LocalFileHeader.FOLDER_HEADER_SIGNATURE) {
          break;
        }
 else {
          throw new WrongZipFormatException("readHeaders. Wrong signature found = " + header + " at position "+ baseStream.offset());
        }
      }
      readFileHeader(baseStream,null);
    }
  }
  finally {
    storeBaseStream(baseStream);
  }
}
