{
  if ((maxWidth == 0) || (maxHeight == 0)) {
    return null;
  }
  if ((maxWidth != myLastRequestedWidth) || (maxHeight != myLastRequestedHeight)) {
    myBitmap=null;
    myLastRequestedWidth=maxWidth;
    myLastRequestedHeight=maxHeight;
    try {
      final BitmapFactory.Options options=new BitmapFactory.Options();
      if (myRealWidth == 0) {
        options.inJustDecodeBounds=true;
        BitmapFactory.decodeByteArray(myArray,0,myArray.length,options);
        myRealWidth=options.outWidth;
        myRealHeight=options.outHeight;
      }
      options.inJustDecodeBounds=false;
      int coefficient=1;
      while ((myRealHeight > maxHeight * coefficient) || (myRealWidth > maxWidth * coefficient)) {
        coefficient*=2;
      }
      options.inSampleSize=coefficient;
      myBitmap=BitmapFactory.decodeByteArray(myArray,0,myArray.length,options);
    }
 catch (    OutOfMemoryError e) {
    }
  }
  return myBitmap;
}
