{
  final int currentCharIndex=getCurrentCharNumber(PageIndex.current,false);
  final int lastCharIndex=sizeOfFullText();
  int current=computeTextPageNumber(currentCharIndex);
  int total=computeTextPageNumber(lastCharIndex);
  if (current == total) {
    if (currentCharIndex < lastCharIndex) {
      if (total <= 2) {
        total+=1;
      }
 else {
        current-=1;
      }
    }
 else {
      if (total == 1) {
        ZLTextWordCursor cursor=myCurrentPage.StartCursor;
        if (cursor == null || cursor.isNull()) {
          preparePaintInfo(myCurrentPage);
          cursor=myCurrentPage.StartCursor;
        }
        if (cursor != null && !cursor.isNull() && (!cursor.isStartOfParagraph() || !cursor.getParagraphCursor().isFirst())) {
          total=2;
          current=2;
        }
      }
      if (total == 2) {
        ZLTextWordCursor cursor=myPreviousPage.StartCursor;
        if (cursor == null || cursor.isNull()) {
          preparePaintInfo(myPreviousPage);
          cursor=myPreviousPage.StartCursor;
        }
        if (cursor != null && !cursor.isNull() && (!cursor.isStartOfParagraph() || !cursor.getParagraphCursor().isFirst())) {
          total=3;
          current=3;
        }
      }
    }
  }
 else   if (total == 2 && getCurrentCharNumber(PageIndex.next,false) < lastCharIndex) {
    total=3;
  }
  return new PagePosition(current,total);
}
