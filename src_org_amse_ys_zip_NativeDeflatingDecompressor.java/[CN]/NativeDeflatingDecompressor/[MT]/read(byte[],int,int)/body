{
  if (myAvailable <= 0) {
    return -1;
  }
  if (len > myAvailable) {
    len=myAvailable;
  }
  for (int toFill=len; toFill > 0; ) {
    if (myOutBufferLength == 0) {
      fillOutBuffer();
    }
    if (myOutBufferLength == 0) {
      throw new IOException("cannot read from zip");
    }
    final int ready=(toFill < myOutBufferLength) ? toFill : myOutBufferLength;
    System.arraycopy(myOutBuffer,myOutBufferOffset,b,off,ready);
    off+=ready;
    myOutBufferOffset+=ready;
    toFill-=ready;
    myOutBufferLength-=ready;
  }
  myAvailable-=len;
  return len;
}
