{
  final NetworkCatalogTree catalogTree=(NetworkCatalogTree)tree;
  final NetworkCatalogItem item=catalogTree.Item;
  menu.setHeaderTitle(tree.getName());
  final boolean isOpened=tree.hasChildren() && myAdapter.isOpen(tree);
  if (tree instanceof NetworkCatalogRootTree) {
    if (item.LinkByType.get(NetworkLibraryItem.URL_CATALOG) != null) {
      addMenuItem(menu,EXPAND_OR_COLLAPSE_TREE_ITEM_ID,isOpened ? "closeCatalog" : "openCatalog");
    }
    if (isOpened) {
      addMenuItem(menu,RELOAD_ITEM_ID,"reload");
    }
  }
 else {
    if (item.LinkByType.get(NetworkLibraryItem.URL_CATALOG) != null) {
      addMenuItem(menu,EXPAND_OR_COLLAPSE_TREE_ITEM_ID,isOpened ? "collapseTree" : "expandTree");
    }
    if (item.LinkByType.get(NetworkLibraryItem.URL_HTML_PAGE) != null) {
      addMenuItem(menu,OPEN_IN_BROWSER_ITEM_ID,"openInBrowser");
    }
    if (isOpened) {
      addMenuItem(menu,RELOAD_ITEM_ID,"reload");
    }
  }
  if (tree.hasChildren()) {
    menu.add(0,DBG_UNLOAD_CATALOG_ITEM_ID,0,"Unload catalog");
  }
}
