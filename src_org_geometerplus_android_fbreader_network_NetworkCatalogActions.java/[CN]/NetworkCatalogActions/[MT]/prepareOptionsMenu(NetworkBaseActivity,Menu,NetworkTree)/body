{
  final NetworkCatalogTree catalogTree=(NetworkCatalogTree)tree;
  final NetworkCatalogItem item=catalogTree.Item;
  final boolean isLoading=NetworkView.Instance().containsItemsLoadingRunnable(tree.getUniqueKey());
  prepareOptionsItem(menu,RELOAD_ITEM_ID,item.URLByType.get(NetworkCatalogItem.URL_CATALOG) != null && !isLoading);
  boolean signIn=false;
  boolean signOut=false;
  boolean refill=false;
  String userName=null;
  String account=null;
  NetworkAuthenticationManager mgr=item.Link.authenticationManager();
  if (mgr != null) {
    if (mgr.mayBeAuthorised(false)) {
      userName=mgr.currentUserName();
      signOut=true;
      account=mgr.currentAccount();
      if (mgr.refillAccountLink() != null && account != null) {
        refill=true;
      }
    }
 else {
      signIn=true;
    }
  }
  prepareOptionsItem(menu,SIGNIN_ITEM_ID,signIn);
  prepareOptionsItem(menu,SIGNUP_ITEM_ID,signIn & Util.isRegistrationSupported(activity,item.Link));
  prepareOptionsItem(menu,SIGNOUT_ITEM_ID,signOut,"signOut",userName);
  prepareOptionsItem(menu,REFILL_ACCOUNT_ITEM_ID,refill);
  return true;
}
