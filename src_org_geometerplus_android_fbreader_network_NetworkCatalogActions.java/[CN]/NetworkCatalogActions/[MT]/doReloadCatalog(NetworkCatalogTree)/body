{
  if (!startProgressNotification(tree)) {
    return;
  }
  final Handler progressHandler=new Handler(){
    public void handleMessage(    Message message){
      NetworkLibraryItem item=(NetworkLibraryItem)message.obj;
      boolean expand=!tree.hasChildren();
      tree.ChildrenItems.add(item);
      NetworkTreeFactory.createNetworkTree(tree,item);
      if (!hasMessages(0)) {
        tree.updateAccountDependents();
        myAdapter.resetTree();
      }
      if (expand) {
        myAdapter.expandOrCollapseTree(tree);
      }
    }
  }
;
  final Handler finishHandler=new Handler(){
    public void handleMessage(    Message message){
      afterUpdateCatalog((String)message.obj,tree.ChildrenItems.size() == 0);
      endProgressNotification(tree);
    }
  }
;
  myAdapter.expandOrCollapseTree(tree);
  tree.ChildrenItems.clear();
  tree.clear();
  myAdapter.resetTree();
  new Thread(new Runnable(){
    public void run(){
      String err=tree.Item.loadChildren(new NetworkCatalogItem.CatalogListener(){
        public void onNewItem(        NetworkLibraryItem item){
          progressHandler.sendMessage(progressHandler.obtainMessage(0,item));
        }
      }
);
      finishHandler.sendMessage(finishHandler.obtainMessage(0,err));
    }
  }
).start();
}
