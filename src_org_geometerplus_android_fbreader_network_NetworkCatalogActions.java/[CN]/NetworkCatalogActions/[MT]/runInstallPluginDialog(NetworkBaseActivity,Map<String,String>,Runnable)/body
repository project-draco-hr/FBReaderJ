{
  final String plugin=pluginData.get("androidPlugin");
  if (plugin != null) {
    final String pluginVersion=pluginData.get("androidPluginVersion");
    String dialogKey=null;
    String message=null;
    String positiveButtonKey=null;
    if (!PluginUtil.isPluginInstalled(activity,plugin)) {
      dialogKey="installPlugin";
      message=pluginData.get("androidPluginInstallMessage");
      positiveButtonKey="install";
    }
 else     if (!PluginUtil.isPluginInstalled(activity,plugin,pluginVersion)) {
      dialogKey="updatePlugin";
      message=pluginData.get("androidPluginUpdateMessage");
      positiveButtonKey="update";
    }
    if (dialogKey != null) {
      final ZLResource dialogResource=ZLResource.resource("dialog");
      final ZLResource buttonResource=dialogResource.getResource("button");
      new AlertDialog.Builder(activity).setTitle(dialogResource.getResource(dialogKey).getResource("title").getValue()).setMessage(message).setIcon(0).setPositiveButton(buttonResource.getResource(positiveButtonKey).getValue(),new DialogInterface.OnClickListener(){
        @Override public void onClick(        DialogInterface dialog,        int which){
          PluginUtil.installPackageFromMarket(activity,plugin);
        }
      }
).setNegativeButton(buttonResource.getResource("skip").getValue(),new DialogInterface.OnClickListener(){
        @Override public void onClick(        DialogInterface dialog,        int which){
          postRunnable.run();
        }
      }
).create().show();
      return;
    }
  }
  postRunnable.run();
}
