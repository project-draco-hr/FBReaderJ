{
  if ((maxWidth == 0) || (maxHeight == 0)) {
    return null;
  }
  if ((maxWidth != myLastRequestedWidth) || (maxHeight != myLastRequestedHeight)) {
    if (myBitmap != null) {
      myBitmap.recycle();
      myBitmap=null;
    }
    try {
      final BitmapFactory.Options options=new BitmapFactory.Options();
      if (myRealWidth <= 0) {
        options.inJustDecodeBounds=true;
        decodeWithOptions(options);
        myRealWidth=options.outWidth;
        myRealHeight=options.outHeight;
      }
      options.inJustDecodeBounds=false;
      int coefficient=1;
      while ((myRealHeight > maxHeight * coefficient) || (myRealWidth > maxWidth * coefficient)) {
        coefficient*=2;
      }
      options.inSampleSize=coefficient;
      myBitmap=decodeWithOptions(options);
      if (myBitmap != null) {
        myLastRequestedWidth=maxWidth;
        myLastRequestedHeight=maxHeight;
      }
    }
 catch (    OutOfMemoryError e) {
    }
  }
  return myBitmap;
}
