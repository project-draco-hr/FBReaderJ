{
  String fileToOpen=null;
  if (Intent.ACTION_VIEW.equals(intent.getAction())) {
    final Uri uri=intent.getData();
    if (uri != null) {
      fileToOpen=fileNameFromUri(uri);
      final String scheme=uri.getScheme();
      if ("content".equals(scheme)) {
        final File file=new File(fileToOpen);
        if (!file.exists()) {
          fileToOpen=file.getParent();
        }
      }
    }
    intent.setData(null);
  }
  return fileToOpen;
}
