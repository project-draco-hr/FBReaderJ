{
  super.onCreate(state);
  Thread.setDefaultUncaughtExceptionHandler(new UncaughtExceptionHandler(this));
  requestWindowFeature(Window.FEATURE_NO_TITLE);
  setContentView(R.layout.main);
  setDefaultKeyMode(DEFAULT_KEYS_SEARCH_LOCAL);
  getLibrary().setActivity(this);
  final ZLAndroidApplication androidApplication=(ZLAndroidApplication)getApplication();
  if (androidApplication.myMainWindow == null) {
    final ZLApplication application=createApplication();
    androidApplication.myMainWindow=new ZLAndroidApplicationWindow(application);
    application.initWindow();
  }
  init(new Runnable(){
    public void run(){
      new Thread(){
        public void run(){
          ZLApplication.Instance().openFile(fileFromIntent(getIntent()),getPostponedInitAction());
          ZLApplication.Instance().getViewWidget().repaint();
        }
      }
.start();
      ZLApplication.Instance().getViewWidget().repaint();
    }
  }
);
}
