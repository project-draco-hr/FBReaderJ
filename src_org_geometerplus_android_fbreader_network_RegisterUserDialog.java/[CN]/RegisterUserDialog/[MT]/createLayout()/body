{
  final View layout=myActivity.getLayoutInflater().inflate(R.layout.network_register_user_dialog,null);
  ((TextView)layout.findViewById(R.id.network_register_login_text)).setText(myResource.getResource("login").getValue());
  ((TextView)layout.findViewById(R.id.network_register_password_text)).setText(myResource.getResource("password").getValue());
  ((TextView)layout.findViewById(R.id.network_register_confirm_password_text)).setText(myResource.getResource("confirmPassword").getValue());
  ((TextView)layout.findViewById(R.id.network_register_email_text)).setText(myResource.getResource("email").getValue());
  myRegistrationUtils=new RegistrationUtils(myActivity.getApplicationContext());
  final List<String> emails=myRegistrationUtils.eMails();
  if (!emails.isEmpty()) {
    final DialogInterface.OnClickListener listener=new DialogInterface.OnClickListener(){
      public void onClick(      DialogInterface dialog,      int which){
        if (which >= 0 && which < emails.size()) {
          myEmail=emails.get(which);
        }
        dialog.dismiss();
      }
    }
;
    ((Button)layout.findViewById(R.id.network_register_email_button)).setOnClickListener(new View.OnClickListener(){
      public void onClick(      View v){
        myLogin=((TextView)layout.findViewById(R.id.network_register_login)).getText().toString().trim();
        myPassword=((TextView)layout.findViewById(R.id.network_register_password)).getText().toString();
        myConfirmPassword=((TextView)layout.findViewById(R.id.network_register_confirm_password)).getText().toString();
        myEmail=((TextView)layout.findViewById(R.id.network_register_email)).getText().toString().trim();
        final int selected=emails.indexOf(myEmail);
        final ZLResource buttonResource=ZLResource.resource("dialog").getResource("button");
        final AlertDialog dialog=new AlertDialog.Builder(myActivity).setSingleChoiceItems(emails.toArray(new String[emails.size()]),selected,listener).setTitle(myResource.getResource("email").getValue()).setNegativeButton(buttonResource.getResource("cancel").getValue(),null).create();
        dialog.setOnDismissListener(new DialogInterface.OnDismissListener(){
          public void onDismiss(          DialogInterface dialog){
            myActivity.showDialog(myId);
          }
        }
);
        myActivity.dismissDialog(myId);
        dialog.show();
      }
    }
);
  }
  return layout;
}
