{
  if (fileName == null) {
    return null;
  }
  String physicalFileName=new ZLFile(fileName).getPhysicalFilePath();
  ZLFile file=new ZLFile(physicalFileName);
  if (checkFile && !file.exists()) {
    return null;
  }
  BookDescription description=ourDescriptions.get(fileName);
  if (description == null) {
    description=new BookDescription(fileName);
    ourDescriptions.put(fileName,description);
  }
  if ((!checkFile || BookDescriptionUtil.checkInfo(file)) && description.isSaved()) {
    return description;
  }
  if (physicalFileName != fileName) {
    BookDescriptionUtil.resetZipInfo(file);
  }
  BookDescriptionUtil.saveInfo(file);
  ZLFile bookFile=new ZLFile(fileName);
  FormatPlugin plugin=PluginCollection.instance().getPlugin(bookFile,false);
  if ((plugin == null) || !plugin.readDescription(fileName,description)) {
    return null;
  }
  String title=description.getTitle();
  if ((title == null) || (title.length() == 0)) {
    description.setTitle(bookFile.getName(true));
  }
  description.save();
  return description;
}
